KEEP.initTOC=()=>{var e=document.querySelector(".page-container"),t=document.querySelector(".post-page-container");let o=document.querySelector(".pc-post-toc"),c=document.querySelector(".tablet-post-toc");KEEP.utils.hasToc?(KEEP.utils.tocHelper={pcTocNavSections:[],tabletTocNavSections:[],getActiveIndex(o){if(Array.isArray(o)){var{isHideHeader:c,headerWrapperDom:i}=KEEP.utils;let t=c?0:i.getBoundingClientRect().height,e=o.findIndex(e=>e&&0<e.getBoundingClientRect().top-(20+t));return-1===e?e=o.length-1:0<e&&e--,e}},activeNav(){this.activateNavByIndex(o,this.getActiveIndex(this.pcTocNavSections)),this.activateNavByIndex(c,this.getActiveIndex(this.tabletTocNavSections))},registerTocNav(){var e=e=>[...e.querySelectorAll(".post-toc li a.nav-link")].map(e=>{var t=document.getElementById(decodeURI(e.getAttribute("href")).replace("#",""));return KEEP.utils.title2Top4HTag(e,t,500),t});this.pcTocNavSections=e(o),this.tabletTocNavSections=e(c)},activateNavByIndex(t,o){o=t.querySelectorAll(".post-toc li a.nav-link")[o];if(o&&!o.classList.contains("active-current")){t.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),o.classList.add("active","active-current");let e=o.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode;t=t.querySelector(".post-toc-wrap");window.anime({targets:t,duration:200,easing:"linear",scrollTop:t.scrollTop-t.offsetHeight/2+o.getBoundingClientRect().top-t.getBoundingClientRect().top})}},handleShowWhenHasToc(){var e=()=>{var e=KEEP.getStyleStatus(),t="isShowToc";e&&e.hasOwnProperty(t)?KEEP.utils.postHelper.hasToc(e[t]):KEEP.utils.postHelper.hasToc(!0)},t="init_open";!KEEP.theme_config.toc.hasOwnProperty(t)||KEEP.theme_config.toc[t]?e():KEEP.utils.postHelper.hasToc(!1)}},KEEP.utils.tocHelper.handleShowWhenHasToc(),KEEP.utils.tocHelper.registerTocNav()):(o&&t.removeChild(o),c&&e.removeChild(document.querySelector(".tablet-post-toc-mask")))},!0===KEEP.theme_config?.pjax?.enable&&KEEP.utils?KEEP.initTOC():window.addEventListener("DOMContentLoaded",KEEP.initTOC);