KEEP.initCodeBlock=()=>{!0===KEEP.theme_config?.code_block?.tools?.enable&&(KEEP.utils.initCodeBlockTools=()=>{var e=(KEEP.theme_config?.code_block||{}).style,t=(KEEP.theme_config?.code_block?.tools||{}).style;let s="mac"===(e||t||"default"),a=s?"fas fa-chevron-left":"fas fa-chevron-right",{copy:c,copied:r,fold:d,folded:p}=KEEP.language_code_block,f=`<span class="tool fold tooltip" data-tooltip-content="${d}" data-tooltip-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach(n=>{let e=n.classList.length?n.classList[1].toUpperCase():"";"PLAINTEXT"===e&&(e="");var t=document.createElement("div"),o=(t.classList.add("highlight-container"),s&&t.classList.add("mac"),n.wrap(t),e?'<span class="code-lang">'+e+"</span>":"");t.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">
        ${s?f+o:"<span>"+f+o+"</span>"}
        <span class="tool copy tooltip" data-tooltip-content="${c}" data-tooltip-offset-y="-2px"><i class="fas fa-copy"></i></span>
      </div>`);let i=n.parentNode.querySelector(".code-tools-box");t=i.querySelector(".copy"),o=i.querySelector(".fold");t.addEventListener("click",e=>{var e=e.currentTarget,t=[...n.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n"),o=document.createElement("textarea"),l=(o.style.top=window.scrollY+"px",o.style.position="absolute",o.style.opacity="0",o.readOnly=!0,o.value=t,document.body.append(o),document.getSelection()),s=0<l.rangeCount&&l.getRangeAt(0),t=(o.select(),o.setSelectionRange(0,t.length),o.readOnly=!1,document.execCommand("copy")),a=e.querySelector("i"),c=i.querySelector(".copy .tooltip-content");t?(a.className="fas fa-check",c&&(c.innerHTML=r)):a.className="fas fa-times",o.blur(),e.blur(),s&&(l.removeAllRanges(),l.addRange(s)),document.body.removeChild(o)}),t.addEventListener("mouseleave",t=>{setTimeout(()=>{t.target.querySelector("i").className="fas fa-copy";var e=i.querySelector(".copy .tooltip-content");e&&(e.innerHTML=c)},500)});let l=!1;o.addEventListener("click",e=>{var e=e.currentTarget.querySelector("i"),t=i.querySelector(".fold .tooltip-content");(l=!l)?(e.className=a,n.classList.add("folded"),i.classList.add("folded"),t&&(t.innerHTML=p)):(e.className="fas fa-chevron-down",n.classList.remove("folded"),i.classList.remove("folded"),t&&(t.innerHTML=d))})})},KEEP.utils.initCodeBlockTools());var e=document.querySelector(".post-content");e&&!e.classList.contains("code-block-unshrink")&&(KEEP.utils.shrinkCodeBlock=()=>{document.querySelectorAll("figure.highlight").forEach(e=>{(t=>{let o=t.getBoundingClientRect().height;if(50<o-200){t.style.position="relative",t.style.overflow="hidden",t.style.height="200px";let e=document.createElement("div");e.setAttribute("class","shrink-line flex-center"),e.style.height="30px",e.style.top="170px",e.addEventListener("click",()=>{t.style.removeProperty("overflow"),t.style.overflowY="hidden",t.style.overflowX="auto",t.style.height=o+"px",e.style.display="none"}),t.appendChild(e)}})(e)})},KEEP.utils.shrinkCodeBlock())};