<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="XPoet"><meta name="description" content="XPoet&#39;s Blog"><meta name="author" content="XPoet"><title>从 0 开始手把手带你搭建一套企业级 Vue3.x 工程化项目 | XPoet&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/avatar.png"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/fontawesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/regular.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/solid.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/brands.min.css"><link rel="stylesheet" href="/css/custom.css"><script class="keep-theme-configurations">const KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"xpoet.cn",root:"/",language:"en",path:"search.json"},KEEP.theme_config={base_info:{primary_color:"#0066cc",title:"XPoet's Blog",author:"XPoet",avatar:"/images/avatar.png",logo:"/images/avatar.png",favicon:"/images/avatar.png"},menu:{home:"/",archives:"/archives",tags:"/tags",me:{children:[{about:"/about || fa-solid fa-user-graduate"},{links:"/links || fa-solid fa-link"},{tools:"/tools || fa-solid fa-tools"}]}},first_screen:{enable:!0,background_img:"/images/bg.svg",background_img_dark:"/images/bg2.svg",description:"黄色的森林分出两条路，我选择人迹更少的那一条，从此决定我一生的道路。",hitokoto:!1},social_contact:{enable:!0,links:{github:"https://github.com/XPoet",weixin:"img | /images/fp/fp-qrcode.webp",qq:null,weibo:null,zhihu:null,twitter:null,x:null,facebook:null,email:"i@xpoet.cn"}},scroll:{progress_bar:!1,percent:!0,hide_header:!0},home:{announcement:null,category:!0,tag:!0,post_datetime:"updated"},post:{author_badge:{enable:!0,level_badge:!1,custom_badge:"自由程序猿"},word_count:{wordcount:!0,min2read:!0},datetime_format:"YYYY-MM-DD HH:mm:ss",copyright_info:!0,share:!0,reward:{enable:!0,img_link:"/images/admire-code.png",text:null}},code_block:{tools:{enable:!0,style:"default"},highlight_theme:"default"},toc:{enable:!0,number:!0,expand_all:!0,init_open:!0,layout:"right"},website_count:{busuanzi_count:{enable:!0,site_uv:!0,site_pv:!0,page_pv:!0}},local_search:{enable:!0,preload:!0},comment:{enable:!0,use:"waline",valine:{appid:"ih2nzG3ilVNdLgJK4kBXTjOq-gzGzoHsz",appkey:"gdf6tXXLBTLg9qpjS2y6Tbw7",server_urls:null,placeholder:"吐槽一下..."},gitalk:{github_id:null,github_admins:null,repository:null,client_id:null,client_secret:null,proxy:null},twikoo:{env_id:null,region:null,version:"1.6.36"},waline:{server_url:"https://vercel-waline.xpoet.cn",reaction:!0,version:"3.2.1"},giscus:{repo:"XPoet/xpoet.github.io",repo_id:"MDEwOlJlcG9zaXRvcnkzMjk0NzQ2NzM=",category:"Announcements",category_id:"DIC_kwDOE6Nicc4CZnkm",reactions_enabled:!0},artalk:{server:null},disqus:{shortname:null}},rss:{enable:!0},lazyload:{enable:!0},cdn:{enable:!0,provider:"cdnjs"},pjax:{enable:!0},footer:{since:2020,word_count:!1,site_deploy:{enable:!0,provider:"github",url:"https://github.com/xpoet/xpoet.github.io"},record:{enable:!1,list:[{code:null,link:null}]}},inject:{enable:!0,css:["/css/custom.css"],js:[null]},root:"",source_data:{links:[{title:"宝藏博主们"},{name:"不知名艺术家",link:"https://jinzhanqi.com/",description:"love artist, love code.",avatar:"https://s3.ax1x.com/2020/11/17/DVvkB4.jpg"},{name:"爱·绮梦",link:"https://x.iqimeng.com/",description:"学而时习之 不亦说乎",avatar:"https://x.iqimeng.com/images/avatar.jpg"},{name:"Keep learning",link:"https://blog.gooday.press",description:"爱好学习，不断提升自我",avatar:"https://cdn.statically.io/gh/cemonliu/blogpic@main/avatar.svg"},{name:"CitingNutria",link:"https://citingnutria.github.io/",description:"まだ夢がある",avatar:"https://cdn.statically.io/gh/CitingNutria/image_hosting@master/avatar.jpg"},{name:"Xcbyao",link:"https://xcbyao.github.io/",description:"要么庸俗，要么孤独！",avatar:"https://xcbyao.github.io/images/avatar.png"},{name:"Ycr's Blog",link:"https://www.ycr10.cn/",description:"喜欢你的人一直有空，什么都懂，无所不能。",avatar:"https://www.ycr10.cn/wp-content/uploads/2022/02/cropped-Ycr_logo.jpg"},{name:"小龙的跋涉",link:"https://www.eduorg.ltd/",description:"但行好事，莫问前程",avatar:"https://cdn.statically.io/gh/Xiaolong00/raines-photo@master/blog/favicon.42reb4izcgs0.png"},{name:"recovxy",link:"https://naiv.xyz/",description:"在人生的中途，我发现我已经迷失了正路，走进了一座幽暗森林······",avatar:"https://naiv.xyz/assets/blogImg/logo.jpg"},{name:"KAI'S NOTE",link:"https://kainote.top/",description:"三天打鱼 (⊙ˍ⊙) 两天晒网",avatar:"https://s2.loli.net/2022/01/09/UtbhxHv2IA8jqwZ.jpg"},{name:"xustudyxu",link:"https://frxcat.fun/",description:"一起学习编程！",avatar:"https://cdn.statically.io/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp"},{name:"CalvinHaynes 的博客",link:"https://blog.calvinhaynes.top/",description:"慢慢走才会快",avatar:"https://cdn.statically.io/gh/CalvinHaynes/ImageHub@main/Icon/avatar.jpg"},{name:"一座浮岛",link:"https://anlondon.cn/",description:"🤪我的小站🤪",avatar:"https://anlondon.cn/images/logo_my.png"},{name:"有意栽花花满枝",link:"https://blog.hjroyal.top",description:"心中有光、点亮生活",avatar:"https://blog.hjroyal.top/img/profile.webp"},{name:"荣 6 的博客",link:"http://rong6.cn/",description:"钻研信息技术的屑",avatar:"https://img2.huashi6.com/images/resource/u275992/2021/08/04/108889_59388969493.jpg?imageMogr2/quality/75/interlace/1/thumbnail/x1400/gravity/Center/crop/1400x1400/format/webp"},{name:"程序员小明",link:"https://mynamecoder.com",description:"一个很少加班的程序员",avatar:"https://mynamecoder.com/images/avatar.png"},{name:"倚栏听风",link:"https://iweek.eu.org/",description:"十八线运维的工作笔记。",avatar:"https://s1.vika.cn/space/2023/02/17/0c1c4a6b023b42f38aaf39d480206e26"},{name:"Ssk-wh`s Blog",link:"https://ssk-wh.github.io",avatar:"https://ssk-wh.github.io/images/logo.svg",description:"假如走运了呢"},{name:"XTZYJ の技术小屋",link:"https://xtzyj.top/",description:"办法总比困难多。",avatar:"https://xtzyj.top/favicon.ico"},{name:"灯火的博客",link:"https://blog.juniverse.top/",description:"不要懒惰",avatar:"https://blog.juniverse.top/images/lights-logo.jpg"},{name:"绯鞠的博客",link:"https://loli.fj.cn",description:"一只爱折腾的绯鞠",avatar:"https://loli.fj.cn/dist/images/avatar.gif"}],icons:{"稀土掘金":{svg:'<svg t="1717059555650" class="icon" viewBox="0 0 1316 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2653" width="16" height="16"><path d="M643.181714 247.698286l154.916572-123.172572L643.181714 0.256 643.072 0l-154.660571 124.269714 154.660571 123.245715 0.109714 0.182857z m0 388.461714h0.109715l399.579428-315.245714-108.361143-87.04-291.218285 229.888h-0.146286l-0.109714 0.146285L351.817143 234.093714l-108.251429 87.04 399.433143 315.136 0.146286-0.146285z m-0.146285 215.552l0.146285-0.146286 534.893715-422.034285 108.397714 87.04-243.309714 192L643.145143 1024 10.422857 525.056 0 516.754286l108.251429-86.893715L643.035429 851.748571z" fill="#1E80FF" p-id="2654"></path></svg>',link:"https://juejin.cn/user/2700056291193374"}},tools:[{category:"AIGC",anchorId:"QUlHQw0"},{name:"ChatGPT",link:"https://chat.openai.com/",description:"OpenAI 旗下 AI 聊天对话工具",image:"/images/tools/chatgpt.svg"},{name:"Gemini",link:"https://gemini.google.com/app",description:"Google 旗下 AI 聊天对话工具",image:"/images/tools/gemini.svg"},{name:"Kimi",link:"https://kimi.moonshot.cn/",description:"帮你看更大的世界",image:"/images/tools/kimi.svg"},{name:"Copilot",link:"https://copilot.microsoft.com/",description:"微软旗下的日常 AI 助手",image:"/images/tools/copilot.png"},{name:"文心一言",link:"https://yiyan.baidu.com/",description:"百度旗下 AI 聊天对话工具",image:"/images/tools/wenxinyiyan.png"},{name:"通义千问",link:"https://tongyi.aliyun.com/qianwen/",description:"阿里巴巴旗下 AI 聊天对话工具",image:"/images/tools/tongyiqianwen.svg"},{name:"讯飞星火",link:"https://xinghuo.xfyun.cn/",description:"科大讯飞星火认知 AI 大模型",image:"/images/tools/xinghuo.svg"},{name:"Midjourney",link:"https://www.midjourney.com/",description:"AI 图像和插画生成工具",image:"/images/tools/midjourney.png"},{name:"Adobe Firefly",link:"https://firefly.adobe.com/",description:"Adobe 推出的 AI 图像生成和编辑工具",image:"/images/tools/adobe-firefly.svg"},{name:"Stable Diffusion",link:"https://stability.ai/",description:"最强开源 AI 绘画工具",image:"/images/tools/stability.png"},{name:"Microsoft Designer",link:"https://designer.microsoft.com/home",description:"微软推出的在线设计海报和宣传图工具",image:"/images/tools/microsoft-designer.svg"},{name:"文心一格",link:"https://yige.baidu.com/",description:"百度出品的 AI 绘画工具",image:"/images/tools/wenxinyiyan.png"},{name:"AI Bot",link:"https://juejin.cn/bots",description:"稀土掘金 AI Bot 工具集合",image:null},{category:"技术社区",anchorId:"JUU2JThBJTgwJUU2JTlDJUFGJUU3JUE0JUJFJUU1JThDJUJB14"},{name:"稀土掘金",link:"https://juejin.cn/",description:"一个帮助开发者成长的社区",image:"/images/tools/juejin.svg"},{name:"V2EX",link:"https://www.v2ex.com/",description:"创意工作者们的社区",image:"/images/tools/v2ex.png"},{name:"思否",link:"https://segmentfault.com/",description:"中国领先的开发者技术社区",image:"/images/tools/segmentfault.svg"},{name:"博客园",link:"https://www.cnblogs.com/",description:"开发者的网上家园",image:"/images/tools/cnblogs.png"},{name:"W2Solo",link:"https://w2solo.com/",description:"中文独立开发者社区",image:null},{name:"电鸭社区",link:"https://eleduck.com/",description:"专注远程工作招聘交流",image:"/images/tools/dianyashequ.png"},{name:"StackOverflow",link:"https://stackoverflow.com/",description:"全球最大的技术问答社区",image:"/images/tools/stackoverflow.png"},{name:"开源中国",link:"https://www.oschina.net/",description:"目前国内最大的开源技术社区",image:"/images/tools/oschina.webp"},{name:"InfoQ",link:"https://www.infoq.cn/",description:"一个实践驱动的技术社区资讯站点",image:"/images/tools/infoq.png"},{name:"51CTO",link:"https://www.51cto.com/",description:"中国领先的 IT 技术网站",image:"/images/tools/51cto.webp"},{name:"CSDN",link:"https://www.csdn.net/",description:"中文最大的技术社区",image:"/images/tools/csdn.png"},{category:"部署托管",anchorId:"JUU5JTgzJUE4JUU3JUJEJUIyJUU2JTg5JTk4JUU3JUFFJUEx26"},{name:"GitHub Pages",link:"https://pages.github.com/",description:"通过 GitHub 托管和发布的公共网页",image:"/images/tools/github.svg"},{name:"Vercel",link:"https://vercel.com/",description:"Vercel's Frontend Cloud provides the developer experience and infrastructure to build, scale, and secure a faster, more personalized web.",image:"/images/tools/vercel.svg"},{name:"Cloudflare Pages",link:"https://developers.cloudflare.com/pages/",description:"Create full-stack applications that are instantly deployed to the Cloudflare global network.",image:"/images/tools/cloudflare.svg"},{name:"Netlify",link:"https://www.netlify.com/",description:"Netlify is the essential platform for the delivery of exceptional and dynamic web experiences, without limitations.",image:"/images/tools/netlify.svg"},{name:"Railway",link:"https://railway.app/",description:"Railway is the cloud for building, shipping, and monitoring applications.",image:"/images/tools/railway.svg"},{name:"Zeabur",link:"https://zeabur.com",description:"Say goodbye to deployment hassles. With Zeabur, bring your coding genius to life swiftly and smoothly.",image:"/images/tools/zeabur.png"}]},version:"4.2.5"},KEEP.language_ago={second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days ago",week:"%s weeks ago",month:"%s months ago",year:"%s years ago"},KEEP.language_code_block={copy:"Copy code",copied:"Copied",fold:"Fold code block",folded:"Folded"},KEEP.language_copy_copyright={copy:"Copy copyright info",copied:"Copied",title:"Original post title",author:"Original post author",link:"Original post link"}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="XPoet's Blog" type="application/atom+xml">
</head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i></div><main class="page-container border-box"><div class="page-main-content border-box"><div class="page-main-content-top"><header class="header-wrapper"><div class="border-box header-content"><div class="left flex-start border-box"><a class="logo-image border-box" href="/"><img src="/images/avatar.png"> </a><a class="site-name border-box" href="/">XPoet&#39;s Blog</a></div><div class="right border-box"><div class="pc border-box"><ul class="menu-list border-box"><li class="menu-item flex-start border-box"><a class="menu-text-color border-box" href="/">HOME</a></li><li class="menu-item flex-start border-box"><a class="menu-text-color border-box" href="/archives">ARCHIVES</a></li><li class="menu-item flex-start border-box"><a class="menu-text-color border-box" href="/tags">TAGS</a></li><li class="menu-item flex-start border-box has-sub-menu"><a class="menu-text-color border-box" href="javascript:void(0);">ME <i class="menu-text-color collapse-icon fa-solid fa-angle-down"></i></a><ul class="sub-menu-list border-box"><li class="sub-menu-item border-box"><a class="menu-text-color border-box flex-start" href="/about"><i class="menu-text-color sub-menu-icon fa-solid fa-user-graduate"></i> ABOUT</a></li><li class="sub-menu-item border-box"><a class="menu-text-color border-box flex-start" href="/links"><i class="menu-text-color sub-menu-icon fa-solid fa-link"></i> LINKS</a></li><li class="sub-menu-item border-box"><a class="menu-text-color border-box flex-start" href="/tools"><i class="menu-text-color sub-menu-icon fa-solid fa-tools"></i> TOOLS</a></li></ul></li><li class="menu-item search search-popup-trigger"><i class="menu-text-color fas search fa-search"></i></li></ul></div><div class="mobile border-box flex-start"><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list border-box"><li class="drawer-menu-item border-box not-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="/">HOME</a></label></li><li class="drawer-menu-item border-box not-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">ARCHIVES</a></label></li><li class="drawer-menu-item border-box not-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="/tags">TAGS</a></label></li><li class="drawer-menu-item border-box has-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="javascript:void(0);">ME </a><i class="right-side collapse-icon fa-solid fa-angle-left"></i></label><ul class="drawer-sub-menu-list border-box"><li class="sub-menu-item border-box"><a class="drawer-menu-text-color border-box flex-start" href="/about"><span class="sub-menu-icon-wrap border-box flex-center"><i class="drawer-menu-text-color sub-menu-icon fa-solid fa-user-graduate"></i> </span>ABOUT</a></li><li class="sub-menu-item border-box"><a class="drawer-menu-text-color border-box flex-start" href="/links"><span class="sub-menu-icon-wrap border-box flex-center"><i class="drawer-menu-text-color sub-menu-icon fa-solid fa-link"></i> </span>LINKS</a></li><li class="sub-menu-item border-box"><a class="drawer-menu-text-color border-box flex-start" href="/tools"><span class="sub-menu-icon-wrap border-box flex-center"><i class="drawer-menu-text-color sub-menu-icon fa-solid fa-tools"></i> </span>TOOLS</a></li></ul></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle border-box"><div class="main-content border-box"><div class="fade-in-down-animation"><div class="post-page-container border-box"><div class="post-content-container border-box"><div class="post-content-bottom border-box"><div class="post-title">从 0 开始手把手带你搭建一套企业级 Vue3.x 工程化项目</div><div class="post-header border-box"><div class="avatar-box border-box"><img src="/images/avatar.png"></div><div class="info-box"><div class="author border-box"><span class="name">XPoet</span> <span class="author-badge">自由程序猿</span></div><div class="meta-info border-box"><div class="post-meta-info-container border-box post"><div class="post-meta-info border-box"><span class="meta-info-item post-create-date"><i class="icon fa-solid fa-calendar-plus"></i>&nbsp; <span class="datetime">2021-04-06 15:33:47</span> </span><span class="meta-info-item post-update-date"><i class="icon fa-solid fa-file-pen"></i>&nbsp; <span class="datetime" data-updated="Wed Feb 28 2024 14:33:07 GMT+0000">2024-02-28 22:33:07</span> </span><span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;<ul class="post-category-ul"><li class="category-item"><a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li></ul></span><span class="post-tag meta-info-item border-box"><ul class="post-tag-ul"><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Vue/">Vue</a></li><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Vite/">Vite</a></li><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></li></ul></span><span class="meta-info-item post-wordcount"><i class="icon fas fa-file-word"></i>&nbsp;<span>10.6k Words</span> </span><span class="meta-info-item post-min2read"><i class="icon fas fa-clock"></i>&nbsp;<span>44 Mins</span> </span><span class="meta-info-item post-pv"><i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div></div><div class="post-content keep-markdown-body"><p>Vue3 跟 Vite 正式版发布有很长一段时间了，生态圈也渐渐丰富起来，作者已在多个项目中使用，总结一下：就是快！也不用担心稳定性问题，开发体验真不是一般好！还没尝试的同学可以从本文开始学习，从 0 开始手把手带你搭建一套规范的 Vite + Vue3 + TypeScript 前端工程化项目环境。</p><span id="more"></span><p>本文篇幅较长，从以下几个方面展开：</p><ul><li>架构搭建</li><li>代码规范</li><li>提交规范</li><li>单元测试</li><li>自动部署</li></ul><blockquote><p>本项目完整的代码托管在 <a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">GitHub 仓库<i class="fas fa-external-link-alt"></i></a>，欢迎点亮小星星 🌟🌟</p></blockquote><h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ul><li>编程语言：<a class="link" target="_blank" rel="noopener" href="https://www.typescriptlang.org/zh/">TypeScript 4.x<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://www.javascript.com/">JavaScript<i class="fas fa-external-link-alt"></i></a></li><li>构建工具：<a class="link" target="_blank" rel="noopener" href="https://cn.vitejs.dev/">Vite 2.x<i class="fas fa-external-link-alt"></i></a></li><li>前端框架：<a class="link" target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/">Vue 3.x<i class="fas fa-external-link-alt"></i></a></li><li>路由工具：<a class="link" target="_blank" rel="noopener" href="https://next.router.vuejs.org/zh/index.html">Vue Router 4.x<i class="fas fa-external-link-alt"></i></a></li><li>状态管理：<a class="link" target="_blank" rel="noopener" href="https://next.vuex.vuejs.org/">Vuex 4.x<i class="fas fa-external-link-alt"></i></a></li><li>UI 框架：<a class="link" target="_blank" rel="noopener" href="https://element-plus.org/#/zh-CN">Element Plus<i class="fas fa-external-link-alt"></i></a></li><li>CSS 预编译：<a class="link" target="_blank" rel="noopener" href="https://stylus-lang.com/">Stylus<i class="fas fa-external-link-alt"></i></a> &#x2F; <a class="link" target="_blank" rel="noopener" href="https://sass.bootcss.com/documentation">Sass<i class="fas fa-external-link-alt"></i></a> &#x2F; <a class="link" target="_blank" rel="noopener" href="http://lesscss.cn/">Less<i class="fas fa-external-link-alt"></i></a></li><li>HTTP 工具：<a class="link" target="_blank" rel="noopener" href="https://axios-http.com/">Axios<i class="fas fa-external-link-alt"></i></a></li><li>Git Hook 工具：<a class="link" target="_blank" rel="noopener" href="https://typicode.github.io/husky/#/">husky<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged<i class="fas fa-external-link-alt"></i></a></li><li>代码规范：<a class="link" target="_blank" rel="noopener" href="http://editorconfig.org/">EditorConfig<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://prettier.io/">Prettier<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://eslint.org/">ESLint<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://github.com/airbnb/javascript#translation">Airbnb JavaScript Style Guide<i class="fas fa-external-link-alt"></i></a></li><li>提交规范：<a class="link" target="_blank" rel="noopener" href="http://commitizen.github.io/cz-cli/">Commitizen<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://commitlint.js.org/#/">Commitlint<i class="fas fa-external-link-alt"></i></a></li><li>单元测试：<a class="link" target="_blank" rel="noopener" href="https://next.vue-test-utils.vuejs.org/">vue-test-utils<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://jestjs.io/">jest<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-jest">vue-jest<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://kulshekhar.github.io/ts-jest/">ts-jest<i class="fas fa-external-link-alt"></i></a></li><li>自动部署：<a class="link" target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions">GitHub Actions<i class="fas fa-external-link-alt"></i></a></li></ul><h2 id="架构搭建"><a href="#架构搭建" class="headerlink" title="架构搭建"></a>架构搭建</h2><p>请确保你的电脑上成功安装 Node.js，本项目使用 Vite 构建工具，<strong>需要 Node.js 版本 &gt;&#x3D; 12.0.0</strong>。</p><p>查看 Node.js 版本：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>建议将 Node.js 升级到最新的稳定版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 nvm 安装最新稳定版 Node.js</span></span><br><span class="line">nvm install stable</span><br></pre></td></tr></table></figure><h3 id="使用-Vite-快速初始化项目雏形"><a href="#使用-Vite-快速初始化项目雏形" class="headerlink" title="使用 Vite 快速初始化项目雏形"></a>使用 Vite 快速初始化项目雏形</h3><ul><li><p>使用 NPM：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init @vitejs/app</span><br></pre></td></tr></table></figure></li><li><p>使用 Yarn：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create @vitejs/app</span><br></pre></td></tr></table></figure></li></ul><p>然后按照终端提示完成以下操作：</p><ol><li><p>输入项目名称</p><p>例如：本项目名称 <strong>vite-vue3-starter</strong></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2uunmmbbm4w0.png" alt="image"></p></li><li><p>选择模板</p><p>本项目需要使用 Vue3 + TypeScript，所以我们选择 <code>vue-ts</code>，会自动安装 Vue3 和 TypeScript。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.85qfbz8zh1c.png" alt="image"></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.jsp544ku2mo.png" alt="image"></p><p>你还可以通过附加的命令行选项直接指定项目名和模板，本项目要构建 Vite + Vue3 + TypeScript 项目，则运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm 6.x</span></span><br><span class="line">npm init @vitejs/app vite-vue3-starter --template vue-ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm 7+（需要额外的双横线）</span></span><br><span class="line">npm init @vitejs/app vite-vue3-starter -- --template vue-ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># yarn</span></span><br><span class="line">yarn create @vitejs/app vite-vue3-starter --template vue-ts</span><br></pre></td></tr></table></figure></li><li><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></li><li><p>启动项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1z3aiuqxy1a8.png" alt="image"></p><p>如上图，表示 Vite + Vue3 + TypeScript 简单的项目骨架搭建完毕，下面我们来为这个项目集成 Vue Router、Vuex、Element Plus、Axios、Stylus&#x2F;Sass&#x2F;Less。</p></li></ol><h3 id="修改-Vite-配置文件"><a href="#修改-Vite-配置文件" class="headerlink" title="修改 Vite 配置文件"></a>修改 Vite 配置文件</h3><p>Vite 配置文件 <code>vite.config.ts</code> 位于根目录下，项目启动时会自动读取。</p><p>本项目先做一些简单配置，例如：设置 <code>@</code> 指向 <code>src</code> 目录、服务启动端口、打包路径、代理等。</p><p>关于 Vite 更多配置项及用法，请查看 Vite 官网 <a class="link" target="_blank" rel="noopener" href="https://vitejs.dev/config/">https://vitejs.dev/config/<i class="fas fa-external-link-alt"></i></a> 。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="comment">// 如果编辑器提示 path 模块找不到，则可以安装一下 @types/node -&gt; npm i @types/node -D</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>) <span class="comment">// 设置 `@` 指向 `src` 目录</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">base</span>: <span class="string">&#x27;./&#x27;</span>, <span class="comment">// 设置打包路径</span></span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">4000</span>, <span class="comment">// 设置服务启动端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 设置服务启动时是否自动打开浏览器</span></span><br><span class="line">    <span class="attr">cors</span>: <span class="literal">true</span> <span class="comment">// 允许跨域</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置代理，根据我们项目实际情况配置</span></span><br><span class="line">    <span class="comment">// proxy: &#123;</span></span><br><span class="line">    <span class="comment">//   &#x27;/api&#x27;: &#123;</span></span><br><span class="line">    <span class="comment">//     target: &#x27;http://xxx.xxx.xxx.xxx:8000&#x27;,</span></span><br><span class="line">    <span class="comment">//     changeOrigin: true,</span></span><br><span class="line">    <span class="comment">//     secure: false,</span></span><br><span class="line">    <span class="comment">//     rewrite: (path) =&gt; path.replace(&#x27;/api/&#x27;, &#x27;/&#x27;)</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="规范目录结构"><a href="#规范目录结构" class="headerlink" title="规范目录结构"></a>规范目录结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">├── publish/</span><br><span class="line">└── src/</span><br><span class="line">    ├── assets/                    // 静态资源目录</span><br><span class="line">    ├── common/                    // 通用类库目录</span><br><span class="line">    ├── components/                // 公共组件目录</span><br><span class="line">    ├── router/                    // 路由配置目录</span><br><span class="line">    ├── store/                     // 状态管理目录</span><br><span class="line">    ├── style/                     // 通用 CSS 目录</span><br><span class="line">    ├── utils/                     // 工具函数目录</span><br><span class="line">    ├── views/                     // 页面组件目录</span><br><span class="line">    ├── App.vue</span><br><span class="line">    ├── main.ts</span><br><span class="line">    ├── shims-vue.d.ts</span><br><span class="line">├── tests/                         // 单元测试目录</span><br><span class="line">├── index.html</span><br><span class="line">├── tsconfig.json                  // TypeScript 配置文件</span><br><span class="line">├── vite.config.ts                 // Vite 配置文件</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure><h3 id="集成路由工具-Vue-Router"><a href="#集成路由工具-Vue-Router" class="headerlink" title="集成路由工具 Vue Router"></a>集成路由工具 Vue Router</h3><ol><li><p>安装支持 Vue3 的路由工具 vue-router@4</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router@4</span><br></pre></td></tr></table></figure></li><li><p>创建 <code>src/router/index.ts</code> 文件</p><p>在 <code>src</code> 下创建 <code>router</code> 目录，然后在 <code>router</code> 目录里新建 <code>index.ts</code> 文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── router/</span><br><span class="line">        ├── index.ts  // 路由配置文件</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  createWebHashHistory,</span><br><span class="line">  <span class="title class_">RouteRecordRaw</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/vuex.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Array</span>&lt;<span class="title class_">RouteRecordRaw</span>&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/vuex&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Vuex&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Vuex</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/axios&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Axios&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/axios.vue&#x27;</span>) <span class="comment">// 懒加载组件</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>根据本项目路由配置的实际情况，你需要在 <code>src</code> 下创建 <code>views</code> 目录，用来存储页面组件。</p><p>我们在 <code>views</code> 目录下创建 <code>home.vue</code> 、<code>vuex.vue</code> 、<code>axios.vue</code>。</p></li><li><p>在 <code>main.ts</code> 文件中挂载路由配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="集成状态管理工具-Vuex"><a href="#集成状态管理工具-Vuex" class="headerlink" title="集成状态管理工具 Vuex"></a>集成状态管理工具 Vuex</h3><ol><li><p>安装支持 Vue3 的状态管理工具 vuex@next</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex@next</span><br></pre></td></tr></table></figure></li><li><p>创建 <code>src/store/index.ts</code> 文件</p><p>在 <code>src</code> 下创建 <code>store</code> 目录，然后在 <code>store</code> 目录里新建 <code>index.ts</code> 文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── store/</span><br><span class="line">        ├── index.ts  // store 配置文件</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultState = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new store instance.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> defaultState</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"><span class="attr">state</span>: <span class="keyword">typeof</span> defaultState</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">context</span>) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">double</span>(<span class="params"><span class="attr">state</span>: <span class="keyword">typeof</span> defaultState</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">2</span> * state.<span class="property">count</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>在 <code>main.ts</code> 文件中挂载 Vuex 配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="集成-UI-框架-Element-Plus"><a href="#集成-UI-框架-Element-Plus" class="headerlink" title="集成 UI 框架 Element Plus"></a>集成 UI 框架 Element Plus</h3><ol><li><p>安装支持 Vue3 的 UI 框架 Element Plus</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-plus</span><br></pre></td></tr></table></figure></li><li><p>在 <code>main.ts</code> 文件中挂载 Element Plus</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="集成-HTTP-工具-Axios"><a href="#集成-HTTP-工具-Axios" class="headerlink" title="集成 HTTP 工具 Axios"></a>集成 HTTP 工具 Axios</h3><ol><li><p>安装 Axios（Axios 跟 Vue 版本没有直接关系，安装最新即可）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios</span><br></pre></td></tr></table></figure></li><li><p>配置 Axios</p><blockquote><p>为了使项目的目录结构合理且规范，我们在 <code>src</code> 下创建 <code>utils</code> 目录来存储我们常用的工具函数。</p></blockquote><p>Axios 作为 HTTP 工具，我们在 <code>utils</code> 目录下创建 <code>axios.ts</code> 作为 Axios 配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── utils/</span><br><span class="line">        ├── axios.ts  // Axios 配置文件</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Axios</span> <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;https://api.github.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> axios = <span class="title class_">Axios</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  baseURL,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">20000</span> <span class="comment">// 请求超时 20s</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前置拦截器（发起请求之前的拦截）</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据你的项目实际情况来对 config 做处理</span></span><br><span class="line"><span class="comment">     * 这里对 config 不做任何处理，直接返回</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后置拦截器（获取到响应时的拦截）</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据你的项目实际情况来对 response 和 error 做处理</span></span><br><span class="line"><span class="comment">     * 这里对 response 和 error 不做任何处理，直接返回</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span> &amp;&amp; error.<span class="property">response</span>.<span class="property">data</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> code = error.<span class="property">response</span>.<span class="property">status</span></span><br><span class="line">      <span class="keyword">const</span> msg = error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">`Code: <span class="subst">$&#123;code&#125;</span>, Message: <span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[Axios Error]`</span>, error.<span class="property">response</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">`<span class="subst">$&#123;error&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></table></figure></li><li><p>使用 Axios<br>在需要使用 Axios 文件里，引入 Axios 配置文件，参考如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;../utils/axios&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      axios</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">get</span>(<span class="string">&#x27;/users/XPoet&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res: &#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err: &#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="集成-CSS-预编译器-Stylus-x2F-Sass-x2F-Less"><a href="#集成-CSS-预编译器-Stylus-x2F-Sass-x2F-Less" class="headerlink" title="集成 CSS 预编译器 Stylus&#x2F;Sass&#x2F;Less"></a>集成 CSS 预编译器 Stylus&#x2F;Sass&#x2F;Less</h3><p>本项目使用 CSS 预编译器 Stylus，直接安装为开发依赖即可。Vite 内部已帮我们集成了相关的 loader，不需要额外配置。同理，你也可以使用 Sass 或 Less 等。</p><ol><li><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm i stylus -D</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">npm i sass -D</span><br><span class="line">npm i less -D</span><br></pre></td></tr></table></figure></li><li><p>使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>至此，一个基于 TypeScript + Vite + Vue3 + Vue Router + Vuex + Element Plus + Axios + Stylus&#x2F;Sass&#x2F;Less 的前端项目开发环境搭建完毕，项目 Demo 托管在 <a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">GitHub 仓库<i class="fas fa-external-link-alt"></i></a>，需要的同学可以去下载下来，参考学习。</p><p>下面我们来打磨这个项目，增加代码规范约束、提交规范约束、单元测试、自动部署等，让其更完善、更健壮。</p><h2 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h2><p>随着前端应用逐渐变得大型化和复杂化，在同一个项目中有多个人员参与时，每个人的前端能力程度不等，他们往往会用不同的编码风格和习惯在项目中写代码，长此下去，势必会让项目的健壮性越来越差。解决这些问题，理论上讲，口头约定和代码审查都可以，但是这种方式无法实时反馈，而且沟通成本过高，不够灵活，更关键的是无法把控。不以规矩，不能成方圆，我们不得不在项目使用一些工具来约束代码规范。</p><p>本文讲解如何使用 <strong>EditorConfig + Prettier + ESLint</strong> 组合来实现代码规范化。</p><p>这样做带来好处：</p><ul><li>解决团队之间代码不规范导致的可读性差和可维护性差的问题。</li><li>解决团队成员不同编辑器导致的编码规范不统一问题。</li><li>提前发现代码风格问题，给出对应规范提示，及时修复。</li><li>减少代码审查过程中反反复复的修改过程，节约时间。</li><li>自动格式化，统一编码风格，从此和脏乱差的代码说再见。</li></ul><h3 id="集成-EditorConfig-配置"><a href="#集成-EditorConfig-配置" class="headerlink" title="集成 EditorConfig 配置"></a>集成 EditorConfig 配置</h3><p>EditorConfig 有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的编码风格。</p><p>官网：<a class="link" target="_blank" rel="noopener" href="http://editorconfig.org/">http://editorconfig.org<i class="fas fa-external-link-alt"></i></a></p><p>在项目根目录下增加 <code>.editorconfig</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Editor configuration, see http://editorconfig.org</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 表示是最顶层的 EditorConfig 配置文件</span></span><br><span class="line">root = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[*] <span class="comment"># 表示所有文件适用</span></span><br><span class="line">charset = utf-8 <span class="comment"># 设置文件字符集为 utf-8</span></span><br><span class="line">indent_style = space <span class="comment"># 缩进风格（tab | space）</span></span><br><span class="line">indent_size = 2 <span class="comment"># 缩进大小</span></span><br><span class="line">end_of_line = lf <span class="comment"># 控制换行类型(lf | cr | crlf)</span></span><br><span class="line">trim_trailing_whitespace = <span class="literal">true</span> <span class="comment"># 去除行首的任意空白字符</span></span><br><span class="line">insert_final_newline = <span class="literal">true</span> <span class="comment"># 始终在文件末尾插入一个新行</span></span><br><span class="line"></span><br><span class="line">[*.md] <span class="comment"># 表示仅 md 文件适用以下规则</span></span><br><span class="line">max_line_length = off</span><br><span class="line">trim_trailing_whitespace = <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>注意：</p><ul><li><p>VSCode 使用 EditorConfig 需要去插件市场下载插件 <strong>EditorConfig for VS Code</strong> 。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2wj7mdci7ya0.png" alt="image"></p></li><li><p>JetBrains 系列（WebStorm、IntelliJ IDEA 等）则不用额外安装插件，可直接使用 EditorConfig 配置。</p></li></ul><h3 id="集成-Prettier-配置"><a href="#集成-Prettier-配置" class="headerlink" title="集成 Prettier 配置"></a>集成 Prettier 配置</h3><p>Prettier 是一款强大的代码格式化工具，支持 JavaScript、TypeScript、CSS、SCSS、Less、JSX、Angular、Vue、GraphQL、JSON、Markdown 等语言，基本上前端能用到的文件格式它都可以搞定，是当下最流行的代码格式化工具。</p><p>官网：<a class="link" target="_blank" rel="noopener" href="https://prettier.io/">https://prettier.io/<i class="fas fa-external-link-alt"></i></a></p><ol><li><p>安装 Prettier</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i prettier -D</span><br></pre></td></tr></table></figure></li><li><p>创建 Prettier 配置文件</p><p>Prettier 支持多种格式的<a class="link" target="_blank" rel="noopener" href="https://prettier.io/docs/en/configuration.html">配置文件<i class="fas fa-external-link-alt"></i></a>，比如 <code>.json</code>、<code>.yml</code>、<code>.yaml</code>、<code>.js</code>等。</p><p>在本项目根目录下创建 <code>.prettierrc</code> 文件。</p></li><li><p>配置 <code>.prettierrc</code></p><p>在本项目中，我们进行如下简单配置，关于更多配置项信息，请前往官网查看 <a class="link" target="_blank" rel="noopener" href="https://prettier.io/docs/en/options.html">Prettier-Options<i class="fas fa-external-link-alt"></i></a> 。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bracketSpacing&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>Prettier 安装且配置好之后，就能使用命令来格式化代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式化所有文件（. 表示所有文件）</span></span><br><span class="line">npx prettier --write .</span><br></pre></td></tr></table></figure></li></ol><p>注意：</p><ul><li><p>VSCode 编辑器使用 Prettier 配置需要下载插件 <strong>Prettier - Code formatter</strong> 。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1khvzd6zfw68.png" alt="image"></p></li><li><p>JetBrains 系列编辑器（WebStorm、IntelliJ IDEA 等）则不用额外安装插件，可直接使用 Prettier 配置。</p></li></ul><p>Prettier 配置好以后，在使用 VSCode 或 WebStorm 等编辑器的格式化功能时，编辑器就会按照 Prettier 配置文件的规则来进行格式化，避免了因为大家编辑器配置不一样而导致格式化后的代码风格不统一的问题。</p><h3 id="集成-ESLint-配置"><a href="#集成-ESLint-配置" class="headerlink" title="集成 ESLint 配置"></a>集成 ESLint 配置</h3><p><a class="link" target="_blank" rel="noopener" href="https://github.com/eslint/eslint">ESLint<i class="fas fa-external-link-alt"></i></a> 是一款用于查找并报告代码中问题的工具，并且支持部分问题自动修复。其核心是通过对代码解析得到的 AST（Abstract Syntax Tree 抽象语法树）进行模式匹配，来分析代码达到检查代码质量和风格问题的能力。</p><p>正如前面我们提到的因团队成员之间编程能力和编码习惯不同所造成的代码质量问题，我们使用 ESLint 来解决，一边写代码一边查找问题，如果发现错误，就给出规则提示，并且自动修复，长期下去，可以促使团队成员往同一种编码风格靠拢。</p><ol><li><p>安装 ESLint</p><p>可以全局或者本地安装，作者推荐本地安装（只在当前项目中安装）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint -D</span><br></pre></td></tr></table></figure></li><li><p>配置 ESLint</p><p>ESLint 安装成功后，执行 <code>npx eslint --init</code>，然后按照终端操作提示完成一系列设置来创建配置文件。</p><ul><li><p>How would you like to use ESLint? （你想如何使用 ESLint?）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6hp2qaeguvk0.png" alt="image"></p><p>我们这里选择 <strong>To check syntax, find problems, and enforce code style（检查语法、发现问题并强制执行代码风格）</strong></p></li><li><p>What type of modules does your project use?（你的项目使用哪种类型的模块？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6m4op1lj8jw0.png" alt="image"></p><p>我们这里选择 <strong>JavaScript modules (import&#x2F;export)</strong></p></li><li><p>Which framework does your project use? （你的项目使用哪种框架？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.71kbglpvuv40.png" alt="image"></p><p>我们这里选择 <strong>Vue.js</strong></p></li><li><p>Does your project use TypeScript?（你的项目是否使用 TypeScript？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.7dtfqhli6zc0.png" alt="image"></p><p>我们这里选择 <strong>Yes</strong></p></li><li><p>Where does your code run?（你的代码在哪里运行？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.sii441muitc.png" alt="image"></p><p>我们这里选择 <strong>Browser 和 Node</strong>（按空格键进行选择，选完按回车键确定）</p></li><li><p>How would you like to define a style for your project?（你想怎样为你的项目定义风格？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.5v0m1ka49l00.png" alt="image"></p><p>我们这里选择 <strong>Use a popular style guide（使用一种流行的风格指南）</strong></p></li><li><p>Which style guide do you want to follow?（你想遵循哪一种风格指南？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.olsqco7y3ww.png" alt="image"></p><p>我们这里选择 <strong>Airbnb: <a class="link" target="_blank" rel="noopener" href="https://github.com/airbnb/javascript">https://github.com/airbnb/javascript<i class="fas fa-external-link-alt"></i></a></strong></p><p>ESLint 为我们列出了三种社区流行的 JavaScript 风格指南，分别是 Airbnb、Standard、Google。</p><p>这三份风格指南都是由众多大佬根据多年开发经验编写，足够优秀，全球很多大小公司都在使用。我们选用 <strong>GitHub 上 star 最多的 Airbnb</strong>，免去繁琐的配置 ESLint 规则时间，然后让团队成员去学习 Airbnb JavaScript 风格指南即可。</p><p>此时，我们在 ESLint 配置了 Airbnb JavaScript 规则，在编码时，所有不符合 Airbnb 风格的代码，编辑器都会给出提示，并且可以自动修复。</p><p><strong>这里作者不建议大家去自由配置 ESLint 规则，相信我，这三份 JavaScript 代码风格指南值得我们反复学习，掌握后，编程能力能上一大台阶。</strong></p><ul><li><p><a class="link" target="_blank" rel="noopener" href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide<i class="fas fa-external-link-alt"></i></a></p><p><a class="link" target="_blank" rel="noopener" href="https://github.com/lin-123/javascript">Airbnb JavaScript 风格指南 - 中文版<i class="fas fa-external-link-alt"></i></a></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6bg6mj95i340.png" alt="image"></p></li><li><p><a class="link" target="_blank" rel="noopener" href="https://github.com/standard/standard">JavaScript Standard Style<i class="fas fa-external-link-alt"></i></a></p><p><a class="link" target="_blank" rel="noopener" href="https://github.com/standard/standard/blob/master/docs/README-zhcn.md">JavaScript Standard Style - 中文版<i class="fas fa-external-link-alt"></i></a></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3tyxmo1ge0s0.png" alt="image"></p></li><li><p><a class="link" target="_blank" rel="noopener" href="https://google.github.io/styleguide/jsguide.html">Google JavaScript Style Guide<i class="fas fa-external-link-alt"></i></a></p></li></ul></li><li><p>What format do you want your config file to be in?（你希望你的配置文件是什么格式？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6p7k166rq8o0.png" alt="image"></p><p>我们这里选择 <strong>JavaScript</strong></p></li><li><p>Would you like to install them now with npm?（你想现在就用 NPM 安装它们吗？）</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1gn91ehp12kg.png" alt="image"></p><p>根据上面的选择，ESLint 会自动去查找缺失的依赖，我们这里选择 <strong>Yes</strong>，使用 NPM 下载安装这些依赖包。</p><p>注意：如果自动安装依赖失败，那么需要手动安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-airbnb-base eslint-plugin-import eslint-plugin-vue -D</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ESLint 配置文件 <code>.eslintrc.js</code></p><p>在<strong>上一步</strong>操作完成后，会在项目根目录下自动生成 <code>.eslintrc.js</code> 配置文件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;plugin:vue/essential&#x27;</span>, <span class="string">&#x27;airbnb-base&#x27;</span>],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">12</span>,</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>根据项目实际情况，如果我们有额外的 ESLint 规则，也在此文件中追加。</p></li></ol><p>注意：</p><ul><li><p>VSCode 使用 ESLint 配置文件需要去插件市场下载插件 <strong>ESLint</strong> 。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.74p98iz7dfg0.png" alt="image"></p></li><li><p>JetBrains 系列（WebStorm、IntelliJ IDEA 等）则不用额外安装插件。</p></li></ul><p>配置好以后，我们在 VSCode 或 WebStorm 等编辑器中开启 ESLin，写代码时，ESLint 就会按照我们配置的规则来进行实时代码检查，发现问题会给出对应错误提示和修复方案。</p><p>如图：</p><ul><li><p>VSCode<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.c62yn1mjkyo.png" alt="image"></p></li><li><p>WebStorm<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.47a98zb9bv60.png" alt="image"></p></li></ul><p>虽然，现在编辑器已经给出错误提示和修复方案，但需要我们一个一个去点击修复，还是挺麻烦的。很简单，我们只需设置编辑器保存文件时自动执行 <code>eslint --fix</code> 命令进行代码风格修复。</p><ul><li><p>VSCode<br>在 <code>settings.json</code> 设置文件中，增加以下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;source.fixAll.eslint&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>WebStorm<br>打开设置窗口，按如下操作，最后点击 <code>Apply</code> -&gt; <code>OK</code>。<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.30jyc44ht540.png" alt="image"></p></li></ul><h3 id="解决-Prettier-和-ESLint-的冲突"><a href="#解决-Prettier-和-ESLint-的冲突" class="headerlink" title="解决 Prettier 和 ESLint 的冲突"></a>解决 Prettier 和 ESLint 的冲突</h3><p>通常大家会在项目中根据实际情况添加一些额外的 ESLint 和 Prettier 配置规则，难免会存在规则冲突情况。</p><p>本项目中的 ESLint 配置中使用了 Airbnb JavaScript 风格指南校验，其规则之一是<em>代码结束后面要加分号</em>，而我们在 Prettier 配置文件中加了<em>代码结束后面不加分号</em>的配置项，这样就有冲突了，会出现用 Prettier 格式化后的代码，ESLint 检测到格式有问题的，从而抛出错误提示。</p><p>解决两者冲突问题，需要用到 <strong>eslint-plugin-prettier</strong> 和 <strong>eslint-config-prettier</strong>。</p><ul><li><p><code>eslint-plugin-prettier</code> 将 Prettier 的规则设置到 ESLint 的规则中。</p></li><li><p><code>eslint-config-prettier</code> 关闭 ESLint 中与 Prettier 中会发生冲突的规则。</p></li></ul><p>最后形成优先级：<code>Prettier 配置规则</code> &gt; <code>ESLint 配置规则</code>。</p><ul><li><p>安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-prettier eslint-config-prettier -D</span><br></pre></td></tr></table></figure></li><li><p>在 <code>.eslintrc.js</code> 添加 prettier 插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;airbnb-base&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span> <span class="comment">// 添加 prettier 插件</span></span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>这样，我们在执行 <code>eslint --fix</code> 命令时，ESLint 就会按照 Prettier 的配置规则来格式化代码，轻松解决二者冲突问题。</p><h3 id="集成-husky-和-lint-staged"><a href="#集成-husky-和-lint-staged" class="headerlink" title="集成 husky 和 lint-staged"></a>集成 husky 和 lint-staged</h3><p>我们在项目中已集成 ESLint 和 Prettier，在编码时，这些工具可以对我们写的代码进行实时校验，在一定程度上能有效规范我们写的代码，但团队可能会有些人觉得这些条条框框的限制很麻烦，选择视“提示”而不见，依旧按自己的一套风格来写代码，或者干脆禁用掉这些工具，开发完成就直接把代码提交到了仓库，日积月累，ESLint 也就形同虚设。</p><p>所以，我们还需要做一些限制，让没通过 ESLint 检测和修复的代码禁止提交，从而保证仓库代码都是符合规范的。</p><p>为了解决这个问题，我们需要用到 Git Hook，在本地执行 <code>git commit</code> 的时候，就对所提交的代码进行 ESLint 检测和修复（即执行 <code>eslint --fix</code>），如果这些代码没通过 ESLint 规则校验，则禁止提交。</p><p>实现这一功能，我们借助 <a class="link" target="_blank" rel="noopener" href="https://github.com/typicode/husky">husky<i class="fas fa-external-link-alt"></i></a> + <a class="link" target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged<i class="fas fa-external-link-alt"></i></a> 。</p><blockquote><p><a class="link" target="_blank" rel="noopener" href="https://github.com/typicode/husky">husky<i class="fas fa-external-link-alt"></i></a> —— Git Hook 工具，可以设置在 git 各个阶段（<code>pre-commit</code>、<code>commit-msg</code>、<code>pre-push</code> 等）触发我们的命令。<br><a class="link" target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged<i class="fas fa-external-link-alt"></i></a> —— 在 git 暂存的文件上运行 linters。</p></blockquote><h4 id="配置-husky"><a href="#配置-husky" class="headerlink" title="配置 husky"></a>配置 husky</h4><ul><li><p>自动配置（推荐）</p><p>使用 <code>husky-init</code> 命令快速在项目初始化一个 husky 配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init &amp;&amp; npm install</span><br></pre></td></tr></table></figure><p>这行命令做了四件事：</p><ol><li><p>安装 husky 到开发依赖<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3yknd7cdfvg0.png" alt="image"></p></li><li><p>在项目根目录下创建 <code>.husky</code> 目录<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3ki5epkriew0.png" alt="image"></p></li><li><p>在 <code>.husky</code> 目录创建 <code>pre-commit</code> hook，并初始化 <code>pre-commit</code> 命令为 <code>npm test</code><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6n7dripqhg00.png" alt="image"></p></li><li><p>修改 <code>package.json</code> 的 <code>scripts</code>，增加 <code>&quot;prepare&quot;: &quot;husky install&quot;</code><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3c0m6wd9p8o0.png" alt="image"></p></li></ol></li><li><p>手动配置（不推荐，懒是程序员第一生产力）</p><ol><li><p>安装 husky</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i husky -D</span><br></pre></td></tr></table></figure></li><li><p>创建 Git hooks</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky install</span><br></pre></td></tr></table></figure><p>该命令做了两件事：</p><ul><li><p>在项目根目录下创建 <code>.husky</code> 目录<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3ki5epkriew0.png" alt="image"></p></li><li><p>在 <code>.husky</code> 目录创建 <code>pre-commit</code> hook，并初始化 <code>pre-commit</code> 命令为 <code>npm test</code><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6n7dripqhg00.png" alt="image"></p></li></ul></li><li><p>手动修改 <code>package.json</code> 的 <code>scripts</code>，增加 <code>&quot;prepare&quot;: &quot;husky install&quot;</code><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3c0m6wd9p8o0.png" alt="image"></p></li></ol></li></ul><blockquote><p><strong>特别注意：本项目使用 husky 6.x 版本，6.x 版本配置方式跟之前的版本有较大差异。目前网上大部分有关 husky 的教程都是 6 以前的版本，跟本文教程不太一样，当发现配置方法不一致时，一切以 <a class="link" target="_blank" rel="noopener" href="https://typicode.github.io/husky/#/?id=usage">husky 官网<i class="fas fa-external-link-alt"></i></a>为准。</strong></p></blockquote><p>到这里，husky 配置完毕，现在我们来使用它：</p><p>husky 包含很多 <code>hook</code>（钩子），常用有：<code>pre-commit</code>、<code>commit-msg</code>、<code>pre-push</code>。这里，我们使用 <code>pre-commit</code> 来触发 ESLint 命令。</p><p>修改 <code>.husky/pre-commit</code> hook 文件的触发命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eslint --fix ./src --ext .vue,.js,.ts</span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6j6cey4uj800.png" alt="image"></p><p>上面这个 <code>pre-commit</code> hook 文件的作用是：当我们执行 <code>git commit -m &quot;xxx&quot;</code> 时，会先对 <code>src</code> 目录下所有的 <code>.vue</code>、<code>.js</code>、<code>.ts</code> 文件执行 <code>eslint --fix</code> 命令，如果 ESLint 通过，成功 <code>commit</code>，否则终止 <code>commit</code>。</p><p>但是又存在一个问题：有时候我们明明只改动了一两个文件，却要对所有的文件执行 <code>eslint --fix</code>。假如这是一个历史项目，我们在中途配置了 ESLint 规则，那么在提交代码时，也会对其他未修改的“历史”文件都进行检查，可能会造成大量文件出现 ESLint 错误，显然不是我们想要的结果。</p><p>我们要做到只用 ESLint 修复自己此次写的代码，而不去影响其他的代码。所以我们还需借助一个神奇的工具 <strong>lint-staged</strong> 。</p><h4 id="配置-lint-staged"><a href="#配置-lint-staged" class="headerlink" title="配置 lint-staged"></a>配置 lint-staged</h4><p>lint-staged 这个工具一般结合 husky 来使用，它可以让 husky 的 <code>hook</code> 触发的命令只作用于 <code>git add</code>那些文件（即 git 暂存区的文件），而不会影响到其他文件。</p><p>接下来，我们使用 lint-staged 继续优化项目。</p><ol><li><p>安装 lint-staged</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i lint-staged -D</span><br></pre></td></tr></table></figure></li><li><p>在 <code>package.json</code>里增加 lint-staged 配置项</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2uth3b5ni200.png" alt="image"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;*.&#123;vue,js,ts&#125;&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>这行命令表示：只对 git 暂存区的 <code>.vue</code>、<code>.js</code>、<code>.ts</code> 文件执行 <code>eslint --fix</code>。</p></li><li><p>修改 <code>.husky/pre-commit</code> hook 的触发命令为：<code>npx lint-staged</code></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.cdgtch7kle0.png" alt="image"></p></li></ol><p>至此，husky 和 lint-staged 组合配置完成。</p><p>现在我们提交代码时就会变成这样：</p><p>假如我们修改了 <code>scr</code> 目录下的 <code>test-1.js</code>、<code>test-2.ts</code> 和 <code>test-3.md</code> 文件，然后 <code>git add ./src/</code>，最后 <code>git commit -m &quot;test...&quot;</code>，这时候就会只对 <code>test-1.js</code>、<code>test-2.ts</code> 这两个文件执行 <code>eslint --fix</code>。如果 ESLint 通过，成功提交，否则终止提交。从而保证了我们提交到 Git 仓库的代码都是规范的。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.30u6zhpu0ry0.png" alt="image"></p><ul><li><p>提交前 <code>test-1.js</code>、<code>test-2.ts</code><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1dm1yn0jv1a8.png" alt="image"></p></li><li><p>提交后 <code>test-1.js</code>、<code>test-2.ts</code> 自动修复代码格式<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.5wtsmyhllx00.png" alt="image"></p></li></ul><p>无论写代码还是做其他事情，都应该用长远的眼光来看，刚开始使用 ESint 的时候可能会有很多问题，改起来也很费时费力，只要坚持下去，代码质量和开发效率都会得到提升，前期的付出都是值得的。</p><p>这些工具并不是必须的，没有它们你同样可以可以完成功能开发，但是利用好这些工具，你可以写出更高质量的代码。特别是一些刚刚接触的人，可能会觉得麻烦而放弃使用这些工具，失去了一次提升编程能力的好机会。</p><blockquote><p>本项目完整的代码托管在 <a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">GitHub 仓库<i class="fas fa-external-link-alt"></i></a>，有需要的同学可以去下载下来，参考学习。<br><a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">点亮小星星 🌟 支持作者~<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="提交规范"><a href="#提交规范" class="headerlink" title="提交规范"></a>提交规范</h2><p>前面我们已经统一代码规范，并且在提交代码时进行强约束来保证仓库代码质量。多人协作的项目中，在提交代码这个环节，也存在一种情况：不能保证每个人对提交信息的准确描述，因此会出现提交信息紊乱、风格不一致的情况。</p><p>如果 <code>git commit</code> 的描述信息精准，在后期维护和 Bug 处理时会变得有据可查，项目开发周期内还可以根据规范的提交信息快速生成开发日志，从而方便我们追踪项目和把控进度。</p><p>这里，我们使用社区最流行、最知名、最受认可的 Angular 团队提交规范。</p><p>先看看 <a class="link" target="_blank" rel="noopener" href="https://github.com/angular/angular/commits/master">Angular 项目的提交记录<i class="fas fa-external-link-alt"></i></a>：</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3c8hrngc5aq0.png" alt="image"></p><p>如上图，可以看出这些提交信息都是有固定格式的，下面我们来学习 Angular 规范的 commit message 格式。</p><h3 id="commit-message-格式规范"><a href="#commit-message-格式规范" class="headerlink" title="commit message 格式规范"></a>commit message 格式规范</h3><p>commit message 由 Header、Body、Footer 组成。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Header&gt;</span><br><span class="line"></span><br><span class="line">&lt;Body&gt;</span><br><span class="line"></span><br><span class="line">&lt;Footer&gt;</span><br></pre></td></tr></table></figure><h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p>Header 部分包括三个字段 type（必需）、scope（可选）和 subject（必需）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br></pre></td></tr></table></figure><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><p>type 用于说明 commit 的提交类型（必须是以下几种之一）。</p><table><thead><tr><th align="left">值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">feat</td><td align="left">新增一个功能</td></tr><tr><td align="left">fix</td><td align="left">修复一个 Bug</td></tr><tr><td align="left">docs</td><td align="left">文档变更</td></tr><tr><td align="left">style</td><td align="left">代码格式（不影响功能，例如空格、分号等格式修正）</td></tr><tr><td align="left">refactor</td><td align="left">代码重构</td></tr><tr><td align="left">perf</td><td align="left">改善性能</td></tr><tr><td align="left">test</td><td align="left">测试</td></tr><tr><td align="left">build</td><td align="left">变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）</td></tr><tr><td align="left">ci</td><td align="left">更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等</td></tr><tr><td align="left">chore</td><td align="left">变更构建流程或辅助工具</td></tr><tr><td align="left">revert</td><td align="left">代码回退</td></tr></tbody></table><h5 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h5><p>scope 用于指定本次 commit 影响的范围。scope 依据项目而定，例如在业务项目中可以依据菜单或者功能模块划分，如果是组件库开发，则可以依据组件划分。（scope 可省略）</p><h5 id="subject"><a href="#subject" class="headerlink" title="subject"></a>subject</h5><p>subject 是本次 commit 的简洁描述，长度约定在 50 个字符以内，通常遵循以下几个规范：</p><ul><li>用动词开头，第一人称现在时表述，例如：change 代替 changed 或 changes</li><li>第一个字母小写</li><li>结尾不加句号（.）</li></ul><h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><p>body 是对本次 commit 的详细描述，可以分成多行。（body 可省略）</p><p>跟 subject 类似，用动词开头，body 应该说明修改的原因和更改前后的行为对比。</p><h4 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h4><p>如果本次提交的代码是突破性的变更或关闭缺陷，则 Footer 必需，否则可以省略。</p><ul><li><p>突破性的变更</p><p>当前代码与上一个版本有突破性改变，则 Footer 以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动的理由。</p></li><li><p>关闭缺陷</p><p>如果当前提交是针对特定的 issue，那么可以在 Footer 部分填写需要关闭的单个 issue 或一系列 issues。</p></li></ul><h4 id="参考例子"><a href="#参考例子" class="headerlink" title="参考例子"></a>参考例子</h4><ul><li><p>feat</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">feat(browser): onUrlChange event (popstate/hashchange/polling)</span><br><span class="line"></span><br><span class="line">Added new event to browser:</span><br><span class="line">- forward popstate event if available</span><br><span class="line">- forward hashchange event if popstate not available</span><br><span class="line">- do polling when neither popstate nor hashchange available</span><br><span class="line"></span><br><span class="line">Breaks $browser.onHashChange, which was removed (use onUrlChange instead)</span><br></pre></td></tr></table></figure></li><li><p>fix</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fix(compile): couple of unit tests for IE9</span><br><span class="line"></span><br><span class="line">Older IEs serialize html uppercased, but IE9 does not...</span><br><span class="line">Would be better to expect case insensitive, unfortunately jasmine does</span><br><span class="line">not allow to user regexps for throw expectations.</span><br><span class="line"></span><br><span class="line">Closes #392</span><br><span class="line">Breaks foo.bar api, foo.baz should be used instead</span><br></pre></td></tr></table></figure></li><li><p>style</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style(location): add couple of missing semi colons</span><br></pre></td></tr></table></figure></li><li><p>chore</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chore(release): v3.4.2</span><br></pre></td></tr></table></figure></li></ul><h4 id="规范-commit-message-的好处"><a href="#规范-commit-message-的好处" class="headerlink" title="规范 commit message 的好处"></a>规范 commit message 的好处</h4><ul><li>首行就是简洁实用的关键信息，方便在 git history 中快速浏览。</li><li>具有更加详细的 body 和 footer，可以清晰的看出某次提交的目的和影响。</li><li>可以通过 type 过滤出想要查找的信息，也可以通过关键字快速查找相关提交。</li><li>可以直接从 commit 生成 change log。</li></ul><h3 id="集成-Commitizen-实现规范提交"><a href="#集成-Commitizen-实现规范提交" class="headerlink" title="集成 Commitizen 实现规范提交"></a>集成 Commitizen 实现规范提交</h3><p>上面介绍了 Angular 规范提交的格式，初次接触的同学咋一看可能会觉得复杂，其实不然，如果让大家在 <code>git commit</code> 的时候严格按照上面的格式来写，肯定是有压力的，首先得记住不同的类型到底是用来定义什么，subject 怎么写，body 怎么写，footer 要不要写等等问题，懒才是程序员第一生产力，为此我们使用 Commitizen 工具来帮助我们自动生成 commit message 格式，从而实现规范提交。</p><blockquote><p>Commitizen 是一个帮助撰写规范 commit message 的工具。它有一个命令行工具 cz-cli。</p></blockquote><h4 id="安装-Commitizen"><a href="#安装-Commitizen" class="headerlink" title="安装 Commitizen"></a>安装 Commitizen</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install commitizen -D</span><br></pre></td></tr></table></figure><h4 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h4><p>成功安装 Commitizen 后，我们用 <strong>cz-conventional-changelog</strong> 适配器来初始化项目：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx commitizen init cz-conventional-changelog --save-dev --save-exact</span><br></pre></td></tr></table></figure><p>这行命令做了两件事：</p><ul><li>安装 cz-conventional-changelog 到开发依赖（devDependencies）</li><li>在 <code>package.json</code> 中增加了 <code>config.commitizen</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;config&quot;: &#123;</span><br><span class="line">  &quot;commitizen&quot;: &#123;</span><br><span class="line">    &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2au710lnmrrw.png" alt="image"></li></ul><h4 id="使用-Commitizen"><a href="#使用-Commitizen" class="headerlink" title="使用 Commitizen"></a>使用 Commitizen</h4><p>以前我们提交代码都是 <code>git commit -m &quot;xxx&quot;</code>，现在改为 <code>git cz</code>，然后按照终端操作提示，逐步填入信息，就能自动生成规范的 commit message。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1y6p85zepj4w.png" alt="image"><br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.52xl0rolt5k0.png" alt="image"></p><p>最后，在 Git 提交历史中就能看到刚刚规范的提交记录了：<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6p9fdr6rupo0.png" alt="image"></p><h4 id="自定义配置提交说明"><a href="#自定义配置提交说明" class="headerlink" title="自定义配置提交说明"></a>自定义配置提交说明</h4><p>从上面的截图可以看到，<code>git cz</code> 终端操作提示都是英文的，如果想改成中文的或者自定义这些配置选项，我们使用 <strong>cz-customizable</strong> 适配器。</p><h5 id="cz-customizable-初始化项目"><a href="#cz-customizable-初始化项目" class="headerlink" title="cz-customizable 初始化项目"></a>cz-customizable 初始化项目</h5><p>运行如下命令使用 cz-customizable 初始化项目，注意之前已经初始化过一次，这次再初始化，需要加 <code>--force</code> 覆盖。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx commitizen init cz-customizable --save-dev --save-exact --force</span><br></pre></td></tr></table></figure><p>这行命令做了两件事：</p><ul><li><p>安装 cz-customizable 到开发依赖（devDependencies）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;cz-customizable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^6.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>修改 <code>package.json</code> 中的 <code>config.commitizen</code> 字段为：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;commitizen&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/cz-customizable&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="使用-cz-customizable"><a href="#使用-cz-customizable" class="headerlink" title="使用 cz-customizable"></a>使用 cz-customizable</h5><p>在项目根目录下创建 <code>.cz-config.js</code> 文件，然后按照官方提供的<a class="link" target="_blank" rel="noopener" href="https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js">示例<i class="fas fa-external-link-alt"></i></a>来配置。</p><p>在本项目中我们修改成中文：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// type 类型（定义之后，可通过上下键选择）</span></span><br><span class="line">  <span class="attr">types</span>: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;feat&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;feat:     新增功能&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;fix&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;fix:      修复 bug&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;docs&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;docs:     文档变更&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;style&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;style:    代码格式（不影响功能，例如空格、分号等格式修正）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;refactor&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;refactor: 代码重构（不包括 bug 修复、功能新增）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;perf&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;perf:     性能优化&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;test&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;test:     添加、修改测试用例&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;build&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;build:    构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;ci&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ci:       修改 CI 配置、脚本&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;chore&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;chore:    对构建过程或辅助工具和库的更改（不影响源文件、测试用例）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;revert&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;revert:   回滚 commit&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// scope 类型（定义之后，可通过上下键选择）</span></span><br><span class="line">  <span class="attr">scopes</span>: [</span><br><span class="line">    [<span class="string">&#x27;components&#x27;</span>, <span class="string">&#x27;组件相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;hooks&#x27;</span>, <span class="string">&#x27;hook 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;utils&#x27;</span>, <span class="string">&#x27;utils 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;element-ui&#x27;</span>, <span class="string">&#x27;对 element-ui 的调整&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;styles&#x27;</span>, <span class="string">&#x27;样式相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;deps&#x27;</span>, <span class="string">&#x27;项目依赖&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;auth&#x27;</span>, <span class="string">&#x27;对 auth 修改&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;other&#x27;</span>, <span class="string">&#x27;其他修改&#x27;</span>],</span><br><span class="line">    <span class="comment">// 如果选择 custom，后面会让你再输入一个自定义的 scope。也可以不设置此项，把后面的 allowCustomScopes 设置为 true</span></span><br><span class="line">    [<span class="string">&#x27;custom&#x27;</span>, <span class="string">&#x27;以上都不是？我要自定义&#x27;</span>]</span><br><span class="line">  ].<span class="title function_">map</span>(<span class="function">(<span class="params">[value, description]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;value.padEnd(<span class="number">30</span>)&#125;</span> (<span class="subst">$&#123;description&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否允许自定义填写 scope，在 scope 选择的时候，会有 empty 和 custom 可以选择。</span></span><br><span class="line">  <span class="comment">// allowCustomScopes: true,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// allowTicketNumber: false,</span></span><br><span class="line">  <span class="comment">// isTicketNumberRequired: false,</span></span><br><span class="line">  <span class="comment">// ticketNumberPrefix: &#x27;TICKET-&#x27;,</span></span><br><span class="line">  <span class="comment">// ticketNumberRegExp: &#x27;\\d&#123;1,5&#125;&#x27;,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 针对每一个 type 去定义对应的 scopes，例如 fix</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  scopeOverrides: &#123;</span></span><br><span class="line"><span class="comment">    fix: [</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;merge&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;style&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;e2eTest&#x27; &#125;,</span></span><br><span class="line"><span class="comment">      &#123; name: &#x27;unitTest&#x27; &#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 交互提示信息</span></span><br><span class="line">  <span class="attr">messages</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;确保本次提交遵循 Angular 规范！\n选择你要提交的类型：&#x27;</span>,</span><br><span class="line">    <span class="attr">scope</span>: <span class="string">&#x27;\n选择一个 scope（可选）：&#x27;</span>,</span><br><span class="line">    <span class="comment">// 选择 scope: custom 时会出下面的提示</span></span><br><span class="line">    <span class="attr">customScope</span>: <span class="string">&#x27;请输入自定义的 scope：&#x27;</span>,</span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;填写简短精炼的变更描述：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>:</span><br><span class="line">      <span class="string">&#x27;填写更加详细的变更描述（可选）。使用 &quot;|&quot; 换行：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">breaking</span>: <span class="string">&#x27;列举非兼容性重大的变更（可选）：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">footer</span>: <span class="string">&#x27;列举出所有变更的 ISSUES CLOSED（可选）。例如：#31, #34：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmCommit</span>: <span class="string">&#x27;确认提交？&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置只有 type 选择了 feat 或 fix，才询问 breaking message</span></span><br><span class="line">  <span class="attr">allowBreakingChanges</span>: [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 跳过要询问的步骤</span></span><br><span class="line">  <span class="comment">// skipQuestions: [&#x27;body&#x27;, &#x27;footer&#x27;],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// subject 限制长度</span></span><br><span class="line">  <span class="attr">subjectLimit</span>: <span class="number">100</span></span><br><span class="line">  <span class="attr">breaklineChar</span>: <span class="string">&#x27;|&#x27;</span>, <span class="comment">// 支持 body 和 footer</span></span><br><span class="line">  <span class="comment">// footerPrefix : &#x27;ISSUES CLOSED:&#x27;</span></span><br><span class="line">  <span class="comment">// askForBreakingChangeFirst : true,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>建议大家结合项目实际情况来自定义配置提交规则，例如很多时候我们不需要写长描述，公司内部的代码仓库也不需要管理 issue，那么可以把询问 body 和 footer 的步骤跳过（在 <code>.cz-config.js</code> 中修改成 <code>skipQuestions: [&#39;body&#39;, &#39;footer&#39;]</code>）。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.4ko1hj86bno0.png" alt="image"></p><h3 id="集成-commitlint-验证提交规范"><a href="#集成-commitlint-验证提交规范" class="headerlink" title="集成 commitlint 验证提交规范"></a>集成 commitlint 验证提交规范</h3><p>在“代码规范”章节，我们已经讲到过，尽管制定了规范，但在多人协作的项目中，总有些人依旧我行我素，因此提交代码这个环节，我们也增加一个限制：<strong>只让符合 Angular 规范的 commit message 通过</strong>，我们借助 @commitlint&#x2F;config-conventional 和 @commitlint&#x2F;cli 来实现。</p><h4 id="安装-commitlint"><a href="#安装-commitlint" class="headerlink" title="安装 commitlint"></a>安装 commitlint</h4><p>安装 @commitlint&#x2F;config-conventional 和 @commitlint&#x2F;cli</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @commitlint/config-conventional @commitlint/cli -D</span><br></pre></td></tr></table></figure><h4 id="配置-commitlint"><a href="#配置-commitlint" class="headerlink" title="配置 commitlint"></a>配置 commitlint</h4><ul><li><p>创建 commitlint.config.js 文件<br>在项目根目录下创建 <code>commitlint.config.js</code> 文件，并填入以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>] &#125;</span><br></pre></td></tr></table></figure><p>或直接使用快捷命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;module.exports = &#123;extends: [&#x27;@commitlint/config-conventional&#x27;]&#125;&quot;</span> &gt; commitlint.config.js</span><br></pre></td></tr></table></figure></li><li><p>使用 husky 的 <code>commit-msg</code> hook 触发验证提交信息的命令<br>我们使用 husky 命令在 <code>.husky</code> 目录下创建 <code>commit-msg</code> 文件，并在此执行 commit message 的验证命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg <span class="string">&quot;npx --no-install commitlint --edit <span class="variable">$1</span>&quot;</span></span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1it1cslfjt6o.png" alt="image"></p></li></ul><h4 id="commitlint-验证"><a href="#commitlint-验证" class="headerlink" title="commitlint 验证"></a>commitlint 验证</h4><ul><li><p>不符合规范的提交信息<br>如下图，提交信息 <code>test commitlint</code> 不符合规范，提交失败。<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.7ijz5vyl4040.png" alt="image"></p></li><li><p>符合规范的提交信息<br>如下图，提交信息 <code>test: commitlint test</code> 符合规范，成功提交到仓库。<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.6s0vj74uz8g0.png" alt="image"></p></li></ul><p>因为已在项目中集成 commitizen，建议大家用 <code>git cz</code> 来代替 <code>git commit</code> 提交代码，可以保证提交信息规范。</p><blockquote><p>本项目完整的代码托管在 <a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">GitHub 仓库<i class="fas fa-external-link-alt"></i></a>，同学可以去下载下来，参考学习。<br><a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">点亮小星星 🌟 支持作者~<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><p>单元测试是项目开发中一个非常重要的环节，完整的测试能为代码和业务提供质量保证，减少 Bug 的出现。</p><p>本章节将带领大家在 Vite + Vue3 + TypeScript 的项目中集成单元测试工具。</p><h3 id="安装核心依赖"><a href="#安装核心依赖" class="headerlink" title="安装核心依赖"></a>安装核心依赖</h3><p>我们使用 Vue 官方提供的 <strong>vue-test-utils</strong> 和社区流行的测试工具 <strong>jest</strong> 来进行 Vue 组件的单元测试。</p><ul><li><strong><a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-test-utils-next">vue-test-utils<i class="fas fa-external-link-alt"></i></a></strong> The next iteration of Vue Test Utils. It targets Vue 3.</li><li><strong><a class="link" target="_blank" rel="noopener" href="https://github.com/facebook/jest">jest<i class="fas fa-external-link-alt"></i></a></strong> Delightful JavaScript Testing.</li><li><strong><a class="link" target="_blank" rel="noopener" href="https://github.com/vuejs/vue-jest">vue-jest<i class="fas fa-external-link-alt"></i></a></strong> Jest Vue transformer</li><li><strong><a class="link" target="_blank" rel="noopener" href="https://github.com/kulshekhar/ts-jest">ts-jest<i class="fas fa-external-link-alt"></i></a></strong> A Jest transformer with source map support that lets you use Jest to test projects written in TypeScript.</li></ul><p>安装这些工具为开发依赖（devDependencies）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/test-utils@next jest vue-jest@next ts-jest -D</span><br></pre></td></tr></table></figure><h3 id="创建-jest-配置文件"><a href="#创建-jest-配置文件" class="headerlink" title="创建 jest 配置文件"></a>创建 jest 配置文件</h3><p>在项目根目录下新建 <code>jest.config.js</code> 文件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">moduleFileExtensions</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;ts&#x27;</span>],</span><br><span class="line">  <span class="attr">preset</span>: <span class="string">&#x27;ts-jest&#x27;</span>,</span><br><span class="line">  <span class="attr">testEnvironment</span>: <span class="string">&#x27;jsdom&#x27;</span>,</span><br><span class="line">  <span class="attr">transform</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;^.+\\.vue$&#x27;</span>: <span class="string">&#x27;vue-jest&#x27;</span>, <span class="comment">// vue 文件用 vue-jest 转换</span></span><br><span class="line">    <span class="string">&#x27;^.+\\.ts$&#x27;</span>: <span class="string">&#x27;ts-jest&#x27;</span> <span class="comment">// ts 文件用 ts-jest 转换</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 匹配 __tests__ 目录下的 .js/.ts 文件 或其他目录下的 xx.test.js/ts xx.spec.js/ts</span></span><br><span class="line">  <span class="attr">testRegex</span>: <span class="string">&#x27;(/__tests__/.*|(\\.|/)(test|spec))\\.(ts)$&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建单元测试文件"><a href="#创建单元测试文件" class="headerlink" title="创建单元测试文件"></a>创建单元测试文件</h3><p>在上面的 <code>jest.config.js</code> 文件中，我们配置只匹配 <code>__tests__</code> 目录下的任意 <code>.ts</code> 文件或其他目录下的 <code>xx.test.ts</code>&#x2F;<code>xx.spec.ts</code> 文件进行单元测试。</p><p>这里，我们在项目根目录下创建 <code>tests</code> 目录来存储单元测试文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── src/</span><br><span class="line">└── tests/                           // 单元测试目录</span><br><span class="line">    ├── Test.spec.ts                 // Test 组件测试</span><br></pre></td></tr></table></figure><ul><li><code>Test.vue</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test-container page-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-title&quot;</span>&gt;</span>Unit Test Page<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>count is: &#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Vuex&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> count = ref&lt;number&gt;(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        count.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; count, increment &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>Test.spec.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Test</span> <span class="keyword">from</span> <span class="string">&#x27;../src/views/Test.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;Test.vue&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Test</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="title function_">html</span>()).<span class="title function_">toContain</span>(<span class="string">&#x27;Unit Test Page&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="title function_">html</span>()).<span class="title function_">toContain</span>(<span class="string">&#x27;count is: 0&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> wrapper.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">trigger</span>(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="title function_">html</span>()).<span class="title function_">toContain</span>(<span class="string">&#x27;count is: 1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="集成-types-x2F-jest"><a href="#集成-types-x2F-jest" class="headerlink" title="集成 @types&#x2F;jest"></a>集成 @types&#x2F;jest</h3><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2pg6u5vxed40.png" alt="image"></p><p>如上图，我们使用 VSCode &#x2F; WebStrom &#x2F; IDEA 等编辑器时，在单元测试文件中，IDE 会提示某些方法不存在（如 <code>test</code>、<code>describe</code>、<code>it</code>、<code>expect</code>等），安装 @types&#x2F;jest 即可解决。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @types/jest -D</span><br></pre></td></tr></table></figure><p>TypeScript 的编译器也会提示 jest 的方法和类型找不到，我们还需把 @types&#x2F;jest 添加根目录下的 <code>ts.config.json</code>（TypeScript 配置文件）中：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;vite/client&quot;</span><span class="punctuation">,</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="添加-eslint-plugin-jest"><a href="#添加-eslint-plugin-jest" class="headerlink" title="添加 eslint-plugin-jest"></a>添加 eslint-plugin-jest</h3><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.5qxi97b658g0.png" alt="image"></p><p>因为我们在项目中集成了 ESLint，如上图很明显是没通过 ESLint 规则检验。因此，我们还需要在 ESLint 中增加 <strong>eslint-plugin-jest</strong> 插件来解除对 jest 的校验。</p><ul><li><p>安装 eslint-plugin-jest</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-jest -D</span><br></pre></td></tr></table></figure></li><li><p>添加 eslint-plugin-jest 到 ESLint 配置文件 <code>.eslintrc.js</code> 中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;plugin:jest/recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>现在，我们的单元测试代码就不会有错误提示信息了 ؏؏☝ᖗ 乛 ◡ 乛 ᖘ☝؏؏</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.73c0vuyso1g0.png" alt="image"></p><h3 id="执行单元测试"><a href="#执行单元测试" class="headerlink" title="执行单元测试"></a>执行单元测试</h3><p>在根目录下 <code>package.json</code> 文件的 <code>scripts</code> 中，添加一条单元测试命令： <code>&quot;test&quot;: &quot;jest&quot;</code>。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.7aqv17602lw0.png" alt="image"></p><p>执行命令 <code>npm run test</code> 即可进行单元测试，jest 会根据 <code>jest.config.js</code> 配置文件去查找 <code>__tests__</code> 目录下的 <code>.ts</code> 文件或其他任意目录下的 <code>.spec.ts</code> 和 <code>.test.ts</code> 文件，然后执行单元测试方法。</p><blockquote><p>你可以在 <code>jest.config.js</code> 配置文件中，自由配置单元测试文件的目录。</p></blockquote><ul><li><p>单元测试全部通过时的终端显示信息<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.735bufa0bj80.png" alt="image"></p></li><li><p>单元测试未全部通过时的终端显示信息<br><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.72989ryb2yw0.png" alt="image"></p></li></ul><p>当单元测试没有全部通过时，我们需要根据报错信息去优化对应组件的代码，进一步提高项目健壮性。但是写单元测试是件比较痛苦的事，我个人觉得也没必要全部组件都写单元测试，根据项目实际情况有针对性去写就行了。</p><h3 id="单元测试约束"><a href="#单元测试约束" class="headerlink" title="单元测试约束"></a>单元测试约束</h3><p>前面，我们使用 husky 在 Git 的 <code>pre-commit</code> 和 <code>commit-msg</code> 阶段分别约束代码风格规范和提交信息规范。这一步，我们在 <code>pre-push</code> 阶段进行单元测试，只有单元测试全部通过才让代码 <code>push</code> 到远端仓库，否则终止 <code>push</code>。</p><p>使用 husky 命令在 <code>.husky</code> 目录下自动创建 <code>pre-push</code> hook 文件，并在此执行单元测试命令 <code>npm run test</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/pre-push &quot;npm run test $1&quot;</span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.2lmc92of0ak0.png" alt="image"></p><p>现在，我们在 <code>git push</code> 时就能先进行单元测试了，只有单元测试全部通过，才能成功 <code>push</code>。</p><blockquote><p>本项目完整的代码托管在 <a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">GitHub 仓库<i class="fas fa-external-link-alt"></i></a>，同学可以去下载下来，参考学习。<br><a class="link" target="_blank" rel="noopener" href="https://github.com/XPoet/vite-vue3-starter">点亮小星星 🌟 支持作者~<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="自动部署"><a href="#自动部署" class="headerlink" title="自动部署"></a>自动部署</h2><p>到了这一步，我们已经在项目中集成<strong>代码规范约束</strong>、<strong>提交信息规范约束</strong>，<strong>单元测试约束</strong>，从而保证我们远端仓库（如 GitHub、GitLab、Gitee 仓库等）的代码都是高质量的。</p><p>本项目是要搭建一套规范的前端工程化环境，为此我们使用 CI（Continuous Integration 持续集成）来完成项目最后的部署工作。</p><p>常见的 CI 工具有 GitHub Actions、GitLab CI、Travis CI、Circle CI 等。</p><p>这里，我们使用 GitHub Actions。</p><h3 id="什么是-GitHub-Actions"><a href="#什么是-GitHub-Actions" class="headerlink" title="什么是 GitHub Actions"></a>什么是 GitHub Actions</h3><p>GitHub Actions 是 GitHub 的持续集成服务，持续集成由很多操作组成，比如抓取代码、运行测试、登录远程服务器、发布到第三方服务等等，GitHub 把这些操作称为 actions。</p><h3 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h3><h4 id="创建-GitHub-仓库"><a href="#创建-GitHub-仓库" class="headerlink" title="创建 GitHub 仓库"></a>创建 GitHub 仓库</h4><p>因为 GitHub Actions 只对 GitHub 仓库有效，所以我们<a class="link" target="_blank" rel="noopener" href="https://github.com/new">创建 GitHub 仓库<i class="fas fa-external-link-alt"></i></a>来托管项目代码。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.5m6a0jmmx140.png" alt="image"></p><p>其中，我们用：</p><ul><li><code>master</code> 分支存储项目源代码</li><li><code>gh-pages</code> 分支存储打包后的静态文件</li></ul><blockquote><p><code>gh-pages</code> 分支，是 GitHub Pages 服务的固定分支，可以通过 HTTP 的方式访问到这个分支的静态文件资源。</p></blockquote><h4 id="创建-GitHub-Token"><a href="#创建-GitHub-Token" class="headerlink" title="创建 GitHub Token"></a>创建 GitHub Token</h4><p>创建一个有 <strong>repo</strong> 和 <strong>workflow</strong> 权限的 <a class="link" target="_blank" rel="noopener" href="https://github.com/settings/tokens/new">GitHub Token<i class="fas fa-external-link-alt"></i></a></p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.635qmlsgjtc0.png" alt="image"></p><p>注意：新生成的 Token 只会显示一次，保存起来，后面要用到。如有遗失，重新生成即可。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.vbmix82c9n4.png" alt="image"></p><h4 id="在仓库中添加-secret"><a href="#在仓库中添加-secret" class="headerlink" title="在仓库中添加 secret"></a>在仓库中添加 secret</h4><p>将上面新创建的 Token 添加到 GitHub 仓库的 <code>Secrets</code> 里，并将这个新增的 <code>secret</code> 命名为 <code>VUE3_DEPLOY</code> （名字无所谓，看你喜欢）。</p><p>步骤：仓库 -&gt; <code>settings</code> -&gt; <code>Secrets</code> -&gt; <code>New repository secret</code>。</p><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.3eww17h7c7c0.png" alt="image"></p><blockquote><p>新创建的 secret <code>VUE3_DEPLOY</code> 在 Actions 配置文件中要用到，两个地方需保持一致！</p></blockquote><h4 id="创建-Actions-配置文件"><a href="#创建-Actions-配置文件" class="headerlink" title="创建 Actions 配置文件"></a>创建 Actions 配置文件</h4><ol><li>在项目根目录下创建 <code>.github</code> 目录。</li><li>在 <code>.github</code> 目录下创建 <code>workflows</code> 目录。</li><li>在 <code>workflows</code> 目录下创建 <code>deploy.yml</code> 文件。</li></ol><p><img lazyload alt="image" data-src="https://cdn.statically.io/gh/XPoet/image-hosting@master/vite-vue3/image.1rjxbhvs2dcw.png" alt="image"></p><p><code>deploy.yml</code> 文件的内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">master</span>] <span class="comment"># master 分支有 push 时触发</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span> <span class="string">v14.x</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14.x&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="comment"># 安装依赖</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span> <span class="comment"># 打包</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span> <span class="comment"># 使用部署到 GitHub pages 的 action</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./dist</span> <span class="comment"># 部署打包后的 dist 目录</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.VUE3_DEPLOY</span> <span class="string">&#125;&#125;</span> <span class="comment"># secret 名</span></span><br><span class="line">          <span class="attr">user_name:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.MY_USER_NAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">user_email:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.MY_USER_EMAIL</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">commit_message:</span> <span class="string">Update</span> <span class="string">Vite2.x</span> <span class="string">+</span> <span class="string">Vue3.x</span> <span class="string">+</span> <span class="string">TypeScript</span> <span class="string">Starter</span> <span class="comment"># 部署时的 git 提交信息，自由填写</span></span><br></pre></td></tr></table></figure><h3 id="自动部署触发原理"><a href="#自动部署触发原理" class="headerlink" title="自动部署触发原理"></a>自动部署触发原理</h3><p>当有新提交的代码 <code>push</code> 到 GitHub 仓库时，就会触发 GitHub Actions，在 GitHub 服务器上执行 Action 配置文件里面的命令，例如：<strong>安装依赖</strong>、<strong>项目打包</strong>等，然后将打包好的静态文件部署到 GitHub Pages 上，最后，我们就能通过域名访问了。</p><blockquote><p>🌏 通过域名 <a class="link" target="_blank" rel="noopener" href="https://vite-vue3-starter.xpoet.cn/">https://vite-vue3-starter.xpoet.cn/<i class="fas fa-external-link-alt"></i></a> 访问本项目</p></blockquote><p>使用自动部署，我们只需专注于项目开发阶段，任何重复且枯燥的行为都交由程序去完成，懒才是程序员第一生产力。</p><p>事实上，自动部署只是 GitHub Actions 功能的冰山一角，GitHub Actions 能做的事还很多很多，大家感兴趣的话自行查阅。</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>本文从技术选项到架构搭建、从代码规范约束到提交信息规范约束，从单元测试到自动部署，一步一步带领大家如何从一个最简单的前端项目骨架到规范的前端工程化环境，基本上涵盖了前端项目开发的整个流程。</p><p>因篇幅较长，所涉及技术点较多，难免会出现错误，希望大家多多指正，谢谢大家！</p><hr><p><img lazyload alt="image" data-src="/images/fp/fp-slogan.webp" alt="FP"></p></div><div class="post-copyright-info-container border-box"><div class="copyright-info-content border-box"><div class="copyright-info-top border-box"><div class="copyright-post-title border-box text-ellipsis">从 0 开始手把手带你搭建一套企业级 Vue3.x 工程化项目</div><div class="copyright-post-link border-box text-ellipsis">post/04962924f0b8/</div></div><div class="copyright-info-bottom border-box"><div class="copyright-post-author bottom-item"><div class="type">Author</div><div class="content">XPoet</div></div><div class="post-time bottom-item"><div class="type">Published</div><div class="content">2021-04-06 15:33</div></div><div class="post-license bottom-item"><div class="type">License</div><div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank"><i class="fa-brands fa-creative-commons"></i> <i class="fa-brands fa-creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc"></i> <i class="fa-brands fa-creative-commons-sa"></i></a></div></div></div><i class="copyright-bg fa-solid fa-copyright"></i></div><div class="copy-copyright-info flex-center tooltip" data-tooltip-content="Copy copyright info" data-tooltip-offset-y="-2px"><i class="fa-solid fa-copy"></i></div></div><div class="post-bottom-tags-and-share border-box"><div><ul class="post-tags-box border-box"><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Vue/">Vue</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Vite/">Vite</a></li><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></li></ul></div><div><div class="post-share-container border-box"><ul class="share-list-wrap border-box"><li class="qq share-item border-box flex-center tooltip" data-tooltip-content="Share to QQ"><i class="fa-brands fa-qq"></i></li><li class="wechat share-item border-box flex-center tooltip tooltip-img" data-tooltip-content="Share to WeChat" data-tooltip-img-tip="Scan by WeChat" data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"><i class="fa-brands fa-weixin"></i></li><li class="weibo share-item border-box flex-center tooltip" data-tooltip-content="Share to WeiBo"><i class="fa-brands fa-weibo"></i></li></ul></div></div></div><div class="reward-author-container border-box flex-center"><div class="reward-btn border-box flex-center tooltip tooltip-img" data-tooltip-img-url="/images/admire-code.png" data-tooltip-img-trigger="click" data-tooltip-img-style="top: -6px;"><i class="fa-solid fa-gift"></i>&nbsp;REWARD AUTHOR</div></div><div class="post-nav border-box"><div class="prev-post"><a class="prev" rel="prev" href="/post/a1ea44b079f7/" title="JavaScript 的内存管理"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">JavaScript 的内存管理</span> <span class="post-nav-item">Prev posts</span></span></a></div><div class="next-post"><a class="next" rel="next" href="/post/936c9599737d/" title="前端工程化入门"><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">前端工程化入门</span> <span class="post-nav-item">Next posts</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div><div class="comments-container border-box"><div id="comments-anchor" class="comment-area-title border-box"><i class="fas fa-comments"></i>&nbsp;Comments</div><div class="comment-plugin-fail border-box"><span class="fail-tip">Comment plugin failed to load</span> <button class="reload keep-button">Click to reload</button></div><div class="comment-plugin-loading flex-center border-box"><i class="loading-icon fa-solid fa-spinner fa-spin"></i> <span class="load-tip">Loading comment plugin</span></div><script data-pjax>window.KeepCommentPlugin={},window.KeepCommentPlugin.hideLoading=()=>{document.querySelector(".comments-container .comment-plugin-loading").style.display="none"},window.KeepCommentPlugin.loadFailHandle=()=>{window.KeepCommentPlugin.hideLoading();const e=document.querySelector(".comments-container .comment-plugin-fail");e.style.display="flex",e.querySelector(".reload").addEventListener("click",()=>{window.location.reload()})}</script><div class="waline-comment-container"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/waline/3.2.1/waline.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/waline/3.2.1/waline-meta.css"><div id="waline-comment"></div><script data-pjax>window.KeepCommentPlugin.walineOptions=JSON.parse("{}".replace(/&#34;/g,'"')),window.KeepCommentPlugin.walineOptions.el="#waline-comment",window.KeepCommentPlugin.walineOptions.comment=".post-comments-count",window.KeepCommentPlugin.walineOptions.serverURL="https://vercel-waline.xpoet.cn",window.KeepCommentPlugin.walineOptions.lang="en",window.KeepCommentPlugin.walineOptions.reaction=!0</script><script data-pjax async type="module">import{init}from"https://cdnjs.cloudflare.com/ajax/libs/waline/3.2.1/waline.js";window.KeepCommentPlugin.initWaline=()=>{init?(init(window.KeepCommentPlugin.walineOptions),window.KeepCommentPlugin.hideLoading()):setTimeout(()=>{window.KeepCommentPlugin.initWaline()},1e3)},setTimeout(()=>{window.KeepCommentPlugin.initWaline()},1200)</script></div></div></div></div><div class="pc-post-toc right-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="nav-number">1.</span> <span class="nav-text">技术栈</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84%E6%90%AD%E5%BB%BA"><span class="nav-number">2.</span> <span class="nav-text">架构搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Vite-%E5%BF%AB%E9%80%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE%E9%9B%8F%E5%BD%A2"><span class="nav-number">2.1.</span> <span class="nav-text">使用 Vite 快速初始化项目雏形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Vite-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">修改 Vite 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">规范目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90%E8%B7%AF%E7%94%B1%E5%B7%A5%E5%85%B7-Vue-Router"><span class="nav-number">2.4.</span> <span class="nav-text">集成路由工具 Vue Router</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-Vuex"><span class="nav-number">2.5.</span> <span class="nav-text">集成状态管理工具 Vuex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-UI-%E6%A1%86%E6%9E%B6-Element-Plus"><span class="nav-number">2.6.</span> <span class="nav-text">集成 UI 框架 Element Plus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-HTTP-%E5%B7%A5%E5%85%B7-Axios"><span class="nav-number">2.7.</span> <span class="nav-text">集成 HTTP 工具 Axios</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-CSS-%E9%A2%84%E7%BC%96%E8%AF%91%E5%99%A8-Stylus-x2F-Sass-x2F-Less"><span class="nav-number">2.8.</span> <span class="nav-text">集成 CSS 预编译器 Stylus&#x2F;Sass&#x2F;Less</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83"><span class="nav-number">3.</span> <span class="nav-text">代码规范</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-EditorConfig-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.1.</span> <span class="nav-text">集成 EditorConfig 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-Prettier-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.2.</span> <span class="nav-text">集成 Prettier 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-ESLint-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">集成 ESLint 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-Prettier-%E5%92%8C-ESLint-%E7%9A%84%E5%86%B2%E7%AA%81"><span class="nav-number">3.4.</span> <span class="nav-text">解决 Prettier 和 ESLint 的冲突</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-husky-%E5%92%8C-lint-staged"><span class="nav-number">3.5.</span> <span class="nav-text">集成 husky 和 lint-staged</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-husky"><span class="nav-number">3.5.1.</span> <span class="nav-text">配置 husky</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-lint-staged"><span class="nav-number">3.5.2.</span> <span class="nav-text">配置 lint-staged</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="nav-number">4.</span> <span class="nav-text">提交规范</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#commit-message-%E6%A0%BC%E5%BC%8F%E8%A7%84%E8%8C%83"><span class="nav-number">4.1.</span> <span class="nav-text">commit message 格式规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Header"><span class="nav-number">4.1.1.</span> <span class="nav-text">Header</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#type"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">type</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#scope"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">scope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#subject"><span class="nav-number">4.1.1.3.</span> <span class="nav-text">subject</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Body"><span class="nav-number">4.1.2.</span> <span class="nav-text">Body</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Footer"><span class="nav-number">4.1.3.</span> <span class="nav-text">Footer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E4%BE%8B%E5%AD%90"><span class="nav-number">4.1.4.</span> <span class="nav-text">参考例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E8%8C%83-commit-message-%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="nav-number">4.1.5.</span> <span class="nav-text">规范 commit message 的好处</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-Commitizen-%E5%AE%9E%E7%8E%B0%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4"><span class="nav-number">4.2.</span> <span class="nav-text">集成 Commitizen 实现规范提交</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Commitizen"><span class="nav-number">4.2.1.</span> <span class="nav-text">安装 Commitizen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.2.2.</span> <span class="nav-text">初始化项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Commitizen"><span class="nav-number">4.2.3.</span> <span class="nav-text">使用 Commitizen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%8F%90%E4%BA%A4%E8%AF%B4%E6%98%8E"><span class="nav-number">4.2.4.</span> <span class="nav-text">自定义配置提交说明</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cz-customizable-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">cz-customizable 初始化项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-cz-customizable"><span class="nav-number">4.2.4.2.</span> <span class="nav-text">使用 cz-customizable</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-commitlint-%E9%AA%8C%E8%AF%81%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="nav-number">4.3.</span> <span class="nav-text">集成 commitlint 验证提交规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-commitlint"><span class="nav-number">4.3.1.</span> <span class="nav-text">安装 commitlint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-commitlint"><span class="nav-number">4.3.2.</span> <span class="nav-text">配置 commitlint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#commitlint-%E9%AA%8C%E8%AF%81"><span class="nav-number">4.3.3.</span> <span class="nav-text">commitlint 验证</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">单元测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%A0%B8%E5%BF%83%E4%BE%9D%E8%B5%96"><span class="nav-number">5.1.</span> <span class="nav-text">安装核心依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-jest-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.2.</span> <span class="nav-text">创建 jest 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.</span> <span class="nav-text">创建单元测试文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-types-x2F-jest"><span class="nav-number">5.4.</span> <span class="nav-text">集成 @types&#x2F;jest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-eslint-plugin-jest"><span class="nav-number">5.5.</span> <span class="nav-text">添加 eslint-plugin-jest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">5.6.</span> <span class="nav-text">执行单元测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.7.</span> <span class="nav-text">单元测试约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="nav-number">6.</span> <span class="nav-text">自动部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-GitHub-Actions"><span class="nav-number">6.1.</span> <span class="nav-text">什么是 GitHub Actions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-GitHub-Actions"><span class="nav-number">6.2.</span> <span class="nav-text">配置 GitHub Actions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-GitHub-%E4%BB%93%E5%BA%93"><span class="nav-number">6.2.1.</span> <span class="nav-text">创建 GitHub 仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-GitHub-Token"><span class="nav-number">6.2.2.</span> <span class="nav-text">创建 GitHub Token</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E4%BB%93%E5%BA%93%E4%B8%AD%E6%B7%BB%E5%8A%A0-secret"><span class="nav-number">6.2.3.</span> <span class="nav-text">在仓库中添加 secret</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Actions-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">6.2.4.</span> <span class="nav-text">创建 Actions 配置文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%A7%A6%E5%8F%91%E5%8E%9F%E7%90%86"><span class="nav-number">6.3.</span> <span class="nav-text">自动部署触发原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%90%8E"><span class="nav-number">7.</span> <span class="nav-text">最后</span></a></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom border-box"><footer class="footer border-box"><div class="copyright-info info-item">&copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2024 &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">XPoet</a></div><div class="theme-info info-item">Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a></div><div class="deploy-info info-item"><a target="_blank" rel="nofollow" href="https://github.com/xpoet/xpoet.github.io">This site is deployed on <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/brands/github.png"></span></a></div><div class="count-info info-item"><span class="count-item border-box uv"><span class="item-type border-box">Unique Visitor</span> <span class="item-value border-box uv" id="busuanzi_value_site_uv"></span> </span><span class="count-item border-box pv"><span class="item-type border-box">Page View</span> <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span></span></div></footer></div></div><div class="post-tools right-toc"><div class="post-tools-container border-box"><ul class="post-tools-list border-box"><li class="tools-item flex-center toggle-show-toc"><i class="fas fa-list"></i></li><li class="tools-item flex-center go-to-comments"><i class="fas fa-comment"></i> <span class="post-comments-count"></span></li><li class="tools-item flex-center full-screen"><i class="fa-solid fa-expand"></i></li></ul></div></div><div class="side-tools"><div class="side-tools-container border-box"><ul class="side-tools-list side-tools-show-handle border-box"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-toggle-theme-mode flex-center"><i class="fas fa-moon"></i></li><li class="tools-item rss flex-center"><a class="flex-center" href="/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list border-box"><li class="tools-item toggle-show-toc-tablet flex-center"><i class="fas fa-list"></i></li><li class="tools-item go-to-comments-tablet flex-center"><i class="fas fa-comment"></i></li><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center show-arrow"><i class="arrow fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="zoom-in-image-mask"><img class="zoom-in-image"></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fas fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input"></div><span class="close-popup-btn"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><div class="tablet-post-toc-mask"><div class="tablet-post-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="nav-number">1.</span> <span class="nav-text">技术栈</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84%E6%90%AD%E5%BB%BA"><span class="nav-number">2.</span> <span class="nav-text">架构搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Vite-%E5%BF%AB%E9%80%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE%E9%9B%8F%E5%BD%A2"><span class="nav-number">2.1.</span> <span class="nav-text">使用 Vite 快速初始化项目雏形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-Vite-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">修改 Vite 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">规范目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90%E8%B7%AF%E7%94%B1%E5%B7%A5%E5%85%B7-Vue-Router"><span class="nav-number">2.4.</span> <span class="nav-text">集成路由工具 Vue Router</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-Vuex"><span class="nav-number">2.5.</span> <span class="nav-text">集成状态管理工具 Vuex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-UI-%E6%A1%86%E6%9E%B6-Element-Plus"><span class="nav-number">2.6.</span> <span class="nav-text">集成 UI 框架 Element Plus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-HTTP-%E5%B7%A5%E5%85%B7-Axios"><span class="nav-number">2.7.</span> <span class="nav-text">集成 HTTP 工具 Axios</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-CSS-%E9%A2%84%E7%BC%96%E8%AF%91%E5%99%A8-Stylus-x2F-Sass-x2F-Less"><span class="nav-number">2.8.</span> <span class="nav-text">集成 CSS 预编译器 Stylus&#x2F;Sass&#x2F;Less</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83"><span class="nav-number">3.</span> <span class="nav-text">代码规范</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-EditorConfig-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.1.</span> <span class="nav-text">集成 EditorConfig 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-Prettier-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.2.</span> <span class="nav-text">集成 Prettier 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-ESLint-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">集成 ESLint 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-Prettier-%E5%92%8C-ESLint-%E7%9A%84%E5%86%B2%E7%AA%81"><span class="nav-number">3.4.</span> <span class="nav-text">解决 Prettier 和 ESLint 的冲突</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-husky-%E5%92%8C-lint-staged"><span class="nav-number">3.5.</span> <span class="nav-text">集成 husky 和 lint-staged</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-husky"><span class="nav-number">3.5.1.</span> <span class="nav-text">配置 husky</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-lint-staged"><span class="nav-number">3.5.2.</span> <span class="nav-text">配置 lint-staged</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="nav-number">4.</span> <span class="nav-text">提交规范</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#commit-message-%E6%A0%BC%E5%BC%8F%E8%A7%84%E8%8C%83"><span class="nav-number">4.1.</span> <span class="nav-text">commit message 格式规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Header"><span class="nav-number">4.1.1.</span> <span class="nav-text">Header</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#type"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">type</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#scope"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">scope</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#subject"><span class="nav-number">4.1.1.3.</span> <span class="nav-text">subject</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Body"><span class="nav-number">4.1.2.</span> <span class="nav-text">Body</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Footer"><span class="nav-number">4.1.3.</span> <span class="nav-text">Footer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E4%BE%8B%E5%AD%90"><span class="nav-number">4.1.4.</span> <span class="nav-text">参考例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E8%8C%83-commit-message-%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="nav-number">4.1.5.</span> <span class="nav-text">规范 commit message 的好处</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-Commitizen-%E5%AE%9E%E7%8E%B0%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4"><span class="nav-number">4.2.</span> <span class="nav-text">集成 Commitizen 实现规范提交</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Commitizen"><span class="nav-number">4.2.1.</span> <span class="nav-text">安装 Commitizen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.2.2.</span> <span class="nav-text">初始化项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Commitizen"><span class="nav-number">4.2.3.</span> <span class="nav-text">使用 Commitizen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%8F%90%E4%BA%A4%E8%AF%B4%E6%98%8E"><span class="nav-number">4.2.4.</span> <span class="nav-text">自定义配置提交说明</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cz-customizable-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">cz-customizable 初始化项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-cz-customizable"><span class="nav-number">4.2.4.2.</span> <span class="nav-text">使用 cz-customizable</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-commitlint-%E9%AA%8C%E8%AF%81%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="nav-number">4.3.</span> <span class="nav-text">集成 commitlint 验证提交规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-commitlint"><span class="nav-number">4.3.1.</span> <span class="nav-text">安装 commitlint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-commitlint"><span class="nav-number">4.3.2.</span> <span class="nav-text">配置 commitlint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#commitlint-%E9%AA%8C%E8%AF%81"><span class="nav-number">4.3.3.</span> <span class="nav-text">commitlint 验证</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">单元测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%A0%B8%E5%BF%83%E4%BE%9D%E8%B5%96"><span class="nav-number">5.1.</span> <span class="nav-text">安装核心依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-jest-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.2.</span> <span class="nav-text">创建 jest 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.</span> <span class="nav-text">创建单元测试文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90-types-x2F-jest"><span class="nav-number">5.4.</span> <span class="nav-text">集成 @types&#x2F;jest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-eslint-plugin-jest"><span class="nav-number">5.5.</span> <span class="nav-text">添加 eslint-plugin-jest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">5.6.</span> <span class="nav-text">执行单元测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.7.</span> <span class="nav-text">单元测试约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="nav-number">6.</span> <span class="nav-text">自动部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-GitHub-Actions"><span class="nav-number">6.1.</span> <span class="nav-text">什么是 GitHub Actions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-GitHub-Actions"><span class="nav-number">6.2.</span> <span class="nav-text">配置 GitHub Actions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-GitHub-%E4%BB%93%E5%BA%93"><span class="nav-number">6.2.1.</span> <span class="nav-text">创建 GitHub 仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-GitHub-Token"><span class="nav-number">6.2.2.</span> <span class="nav-text">创建 GitHub Token</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E4%BB%93%E5%BA%93%E4%B8%AD%E6%B7%BB%E5%8A%A0-secret"><span class="nav-number">6.2.3.</span> <span class="nav-text">在仓库中添加 secret</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Actions-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">6.2.4.</span> <span class="nav-text">创建 Actions 配置文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%A7%A6%E5%8F%91%E5%8E%9F%E7%90%86"><span class="nav-number">6.3.</span> <span class="nav-text">自动部署触发原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%90%8E"><span class="nav-number">7.</span> <span class="nav-text">最后</span></a></li></ol></div></div></div></div></main><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/header-shrink.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/back2top.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/toggle-theme.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/code-block.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/main.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/libs/anime.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/local-search.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/lazyload.min.js"></script><div class="pjax"><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/post-helper.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/toc.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/copyright-info.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/share.min.js"></script></div><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{KEEP.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{KEEP.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),KEEP.initExecute()})})</script></body></html>